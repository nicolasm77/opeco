try{var json2html={transform:function(json,transform,_options){var out={events:[],html:""},options={events:!1};if(options=json2html._extend(options,_options),void 0!==transform||void 0!==json){var obj="string"==typeof json?JSON.parse(json):json;out=json2html._transform(obj,transform,options)}return options.events?out:out.html},_extend:function(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3},_append:function(obj1,obj2){var out={html:"",event:[]};return void 0!==obj1&&void 0!==obj2&&(out.html=obj1.html+obj2.html,out.events=obj1.events.concat(obj2.events)),out},_isArray:function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},_transform:function(json,transform,options){var elements={events:[],html:""};if(json2html._isArray(json))for(var len=json.length,j=0;j<len;++j)elements=json2html._append(elements,json2html._apply(json[j],transform,j,options));else"object"==typeof json&&(elements=json2html._append(elements,json2html._apply(json,transform,void 0,options)));return elements},_apply:function(obj,transform,index,options){var element={events:[],html:""};if(json2html._isArray(transform))for(var t_len=transform.length,t=0;t<t_len;++t)element=json2html._append(element,json2html._apply(obj,transform[t],index,options));else if("object"==typeof transform&&void 0!==transform.tag){var tag=json2html._getValue(obj,transform,"tag",index);element.html+="<"+tag;var html,children={events:[],html:""};for(var key in transform)switch(key){case"tag":break;case"children":if(json2html._isArray(transform.children))children=json2html._append(children,json2html._apply(obj,transform.children,index,options));else if("function"==typeof transform.children){var temp=transform.children.call(obj,obj,index);"object"==typeof temp?void 0!==temp.html&&void 0!==temp.events&&(children=json2html._append(children,temp)):"string"==typeof temp&&(children.html+=temp)}break;case"html":html=json2html._getValue(obj,transform,"html",index);break;default:var isEvent=!1;if(2<key.length&&"on"==key.substring(0,2).toLowerCase()){if(options.events){var data={action:transform[key],obj:obj,data:options.eventData,index:index},id=json2html._guid();element.events[element.events.length]={id:id,type:key.substring(2),data:data},element.html+=" json2html-event-id-"+key.substring(2)+"='"+id+"'"}isEvent=!0}if(!isEvent){var out,val=json2html._getValue(obj,transform,key,index);if(void 0!==val)out="string"==typeof val?'"'+val.replace(/"/g,"&quot;")+'"':val,element.html+=" "+key+"="+out}}element.html+=">",html&&(element.html+=html),(element=json2html._append(element,children)).html+="</"+tag+">"}return element},_guid:function(){var S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return S4()+S4()+"-"+S4()+S4()+"-"+S4()+S4()},_getValue:function(obj,transform,key,index){var val=transform[key],type=jQuery.type(val);return"function"===type?val.call(obj,obj,index):"string"===type?new json2html._tokenizer([/\$\{([^\}\{]+)\}/],function(src,real,re){return real?src.replace(re,function(all,name){for(var components=name.split("."),useObj=obj,outVal="",c_len=components.length,i=0;i<c_len;++i){if(0<components[i].length)if(null==(useObj=useObj[components[i]]))break}return null!=useObj&&(outVal=useObj),outVal}):src}).parse(val).join(""):val},_tokenizer:function(tokenizers,doBuild){if(!(this instanceof json2html._tokenizer))return new json2html._tokenizer(tokenizers,doBuild);this.tokenizers=tokenizers.splice?tokenizers:[tokenizers],doBuild&&(this.doBuild=doBuild),this.parse=function(src){for(this.src=src,this.ended=!1,this.tokens=[];this.next(),!this.ended;);return this.tokens},this.build=function(src,real){src&&this.tokens.push(this.doBuild?this.doBuild(src,real,this.tkn):src)},this.next=function(){var plain,self=this;self.findMin(),plain=self.src.slice(0,self.min),self.build(plain,!1),self.src=self.src.slice(self.min).replace(self.tkn,function(all){return self.build(all,!0),""}),self.src||(self.ended=!0)},this.findMin=function(){var tkn,idx,i=0;for(this.min=-1,this.tkn="";void 0!==(tkn=this.tokenizers[i++]);)-1!=(idx=this.src[tkn.test?"search":"indexOf"](tkn))&&(-1==this.min||idx<this.min)&&(this.tkn=tkn,this.min=idx);-1==this.min&&(this.min=this.src.length)}}};function insertG_Recaptcha(){if($j("#g-recaptcha").length);else if($j("#g-captcha-container").length){checkRecaptchaApiImport();var html_to_insert="<div align='center'><div class='g-recaptcha' id='g-recaptcha' data-sitekey='"+bl.dataSiteKey+"' data-theme='light'></div><div id='recaptcha_error_container' class='errorr' style='display:none; text-align:center; color:#F00; font-size:11px; font-family:arial; font-weight:bold; margin-top:-16px; margin-bottom:40px;'><span>Veuillez valider que vous n'êtes pas un robot.</span></div></div>";$j("#g-captcha-container").html(html_to_insert),validateRecaptchaBeforeSubmittingForm()}}function checkRecaptchaApiImport(){0===$j('script[src="https://www.google.com/recaptcha/api.js"]').length&&$j.getScript("https://www.google.com/recaptcha/api.js")}function validateRecaptchaBeforeSubmittingForm(){$j("form").submit(function(e){return validationCaptchaResponse(e)}),$j("form .validate").bind("click",function(e){return validationCaptchaResponse(e)})}function validationCaptchaResponse(e){return $j("#recaptcha_error_container").hide(),""!==grecaptcha.getResponse()||($j("#recaptcha_error_container").show(),e.stopImmediatePropagation(),!1)}!function($){$.fn.json2html=function(json,transform,_options){if(void 0!==json2html){var options={append:!0,replace:!1,prepend:!1,eventData:{}};return void 0!==_options&&$.extend(options,_options),options.events=!0,this.each(function(){for(var result=json2html.transform(json,transform,options),dom=$(document.createElement("i")).html(result.html),i=0;i<result.events.length;i++){var event=result.events[i],obj=$(dom).find("[json2html-event-id-"+event.type+"='"+event.id+"']");if(0===obj.length)throw"jquery.json2html was unable to attach event "+event.id+" to DOM";$(obj).removeAttr("json2html-event-id-"+event.type),$(obj).on(event.type,event.data,function(e){(e.data.event=e).data.action.call($(this),e.data)})}options.replace?$.fn.replaceWith.call($(this),$(dom).children()):options.prepend?$.fn.prepend.call($(this),$(dom).children()):$.fn.append.call($(this),$(dom).children())})}}}(jQuery),$j(document).ready(function(){insertG_Recaptcha()}),$j(document).on("DOMNodeInserted",".view",function(){insertG_Recaptcha()}),$j.initObject("bl.form"),$j.extend(bl.form,{zipCode:function(el,btn){if(!(void 0===el||void 0===btn||el.length<=0)){el.val()&&el.val(el.val().replace(/[^\d]/g,"")),el.hasClass("minlength5")?el.val()&&null!==el.val().match(/^\d{5}$/)&&!1:el.val()&&null!==el.val().match(/^\d{2}(\d{3})?$/)&&!1}}});var socialXitiHits=function(el,provider){if("function"==typeof xt_med){var isCheckout=$j(el).parents(".socialLogonBtns").attr("is-checkout");isCheckout=!$j.isBlank(isCheckout)&&"true"===isCheckout;var pageKey=$j(el).parents(".socialLogonBtns").attr("page-key"),isMobile=$j(el).parents(".socialLogonBtns").attr("is-mobile");isMobile=!$j.isBlank(isMobile)&&"true"==isMobile;var xtn2=getXtn2(isCheckout,isMobile);$j.isBlank(pageKey)||"BLRegistration"!=pageKey?$j.isBlank(pageKey)||"BLAuthentication"!=pageKey||(isCheckout?xiti_events_clic(this,"Tunnel_commande::Clic_connexion_login_"+provider,xtn2):xiti_events_clic(this,"Compte_client::Clic_connexion_login_"+provider,xtn2)):isCheckout?xiti_events_clic(this,"Tunnel_commande::Clic_inscription_login_"+provider,xtn2):xiti_events_clic(this,"Compte_client::Clic_inscription_login_"+provider,xtn2)}},bindSocialButtonEvents=function(btn,logoffUrl){$j("#facebookSocialBtn, #facebook").bind("click",function(e){socialXitiHits(this,"facebook"),_gum.push(["login",{provider:"facebook"},function(response){reach5ResponseTreatment(response,"facebook",btn,logoffUrl)}])}),$j("#googlePlusSocialBtn, #googlePlus").bind("click",function(e){socialXitiHits(this,"google"),_gum.push(["login",{provider:"google"},function(response){reach5ResponseTreatment(response,"google",btn,logoffUrl)}])}),$j("#twitterSocialBtn, #twitter").bind("click",function(e){socialXitiHits(this,"twitter"),_gum.push(["login",{provider:"twitter"},function(response){reach5ResponseTreatment(response,"twitter",btn,logoffUrl)}])}),$j("#paypalSocialBtn, #paypal").bind("click",function(e){socialXitiHits(this,"paypal"),_gum.push(["login",{provider:"paypal"},function(response){reach5ResponseTreatment(response,"paypal",btn,logoffUrl)}])})};$j(document).ready(function(){$j("a.verifyCredentials").bind("click",function(){return resultAllowUpdate=accountAllowUpdate($j(this)),!1});var inputsCivilities=document.getElementsByClassName("radio-to-btn");if(0<inputsCivilities.length)for(var i=0;i<inputsCivilities.length;i++)inputsCivilities[i].addEventListener("click",function(){document.querySelector(".honorific-prefix").classList.add("handler"),document.querySelector(".honorific-prefix").classList.add("parsley-success")})});var path="/webapp/wcs/stores/servlet/",modalUrl="checkPasswordModalView",logoffPath="Logoff?URL=homepage&storeId=10001&urlRequestType=Base&langId=-2&catalogId=10001";void 0!==basePath||-1<window.location.href.indexOf("secure-mobile")?modalUrl="mCheckPasswordModalView":void 0!==bl.basePath&&(modalUrl="checkPasswordModalView",path=bl.basePath),-1<window.location.href.indexOf("https://m.")&&(modalUrl="mCheckPasswordModalView",logoffPath="Logoff?storeId=10001&URL=mHomepage?storeId=10001&catalogId=10001&langId=-2&ct=m");var logoffUrl=baseHref+path+logoffPath,accountAllowUpdate=function(btn,openPopin){void 0===openPopin&&(openPopin=!0);var allowUpdate=!0,url=path+"AllowUpdateAccount";return $j.ajax({url:url,data:{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId},async:!1,dataType:"json",success:function(data,textStatus,jqXHR){if("object"==typeof data&&null!==data||(allowUpdate=!1),"true"!=data.allowUpdateAccount)openPopin&&Box.open({modal:!0,url:modalUrl,urldata:{providers:data.providers},show:function(){bindFrontValidatePasswordModal(btn)}}),allowUpdate=!1;else{if(void 0!==btn.attr("href")){var url=btn.attr("href");"_blank"==btn.attr("target")?window.open(url):window.location.href=url}allowUpdate=!0}},error:function(jqXHR,textStatus,errorThrown){allowUpdate=!1}}),allowUpdate},verifyCredentials=function(){var credentialsOk=!0,url=path+"VerifyUserCredentials",password=$j("#accountPassword #password").val();return void 0!==password&&""!==password||(password=$j("#login #password").val()),$j.ajax({type:"POST",url:url,data:{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId,password:password},async:!1,dataType:"json",success:function(data,textStatus,jqXHR){"object"==typeof data&&null!==data||(credentialsOk=!1),credentialsOk="true"==data.validCredentials,"true"==data.forceLogoff&&(window.location.href=logoffUrl)},error:function(jqXHR,textStatus,errorThrown){credentialsOk=!1}}),credentialsOk},bindFrontValidatePasswordModal=function(btn){$j("#accountPassword").validate({ignore:"form[id!='login'], :hidden",submitHandler:function(form){return validCredentials=verifyCredentials(),validCredentialCallback(validCredentials,btn),!1}}),bindSocialButtonEvents(btn,logoffUrl)},bindMobileValidatePasswordModal=function(btn){$j("#login").validate({ignore:"form[id!='login'], :hidden",submitHandler:function(form){return validCredentials=verifyCredentials(),!1===validCredentials?($j("#password").val(""),$j("#password").valid()):launchPreviousEvents(btn),!1}})},launchPreviousEvents=function(btn){if(void 0===btn.attr("href")||""===btn.attr("href")||"javascript:void(0)"==btn.attr("href"))$j("#popinAccountLayer .modal_close").click(),btn.click();else{var url=btn.attr("href");"_blank"==btn.attr("target")?($j("#popinAccountLayer .modal_close").click(),window.open(url)):window.location.href=url}},validCredentialCallback=function(isValidCredential,btn){!1===isValidCredential?($j("#password").val(""),$j("#password").valid()):launchPreviousEvents(btn)};"undefined"==typeof bl&&(bl={}),void 0===bl.delivery&&(bl.delivery={});var cacheSites=new Array;$j.extend(bl.delivery,{cacherSites:function(sites){for(var i=0;i<sites.length;i++){var key=sites[i].network+"-"+sites[i].code;cacheSites[key]=sites[i]}},getSiteFromCache:function(keySite){return cacheSites[keySite]},validateParams:function(searchElement,displayClassElement,templates,callbackFunctions){return!0},searchSites:function(searchParams,displayClassElement,templates,callbackFunctions){if(!bl.delivery.validateParams(searchParams,displayClassElement,templates,callbackFunctions))return $j(displayClassElement+" .display-sites").html(""),$j(displayClassElement+" .informations").hide(),$j(displayClassElement+" .text-center").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),void $j(displayClassElement).children(".alert-error").show();$j(displayClassElement+" .display-sites").html(""),$j(displayClassElement+" .informations").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").hide(),$j(displayClassElement).children(".alert-error").hide(),$j(displayClassElement+" .loader").show();var requestBody={};requestBody[searchParams.type]=searchParams.value,requestBody.sortingType=$j("#sortByOption").val();var searchUrl=searchParams.url;bl.cookie.isVenteCookieExist()&&(searchUrl+="&isSeller=true"),$j.getJSON(searchUrl,requestBody,function(data){if(!data||!data.sites||0===data.sites.length)return $j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .delivery-infos").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),$j(displayClassElement).children(".alert-error").show(),$j(displayClassElement+" .text-center").hide(),!1;if($j(displayClassElement+" .delivery-infos").show(),bl.delivery.cacherSites(data.sites),bl.delivery.displaySites(data,displayClassElement,templates),callbackFunctions&&0!==callbackFunctions.length)for(var i=0;i<callbackFunctions.length;i++)callbackFunctions[i]&&"function"==typeof callbackFunctions[i]&&(0,callbackFunctions[i])();$j(displayClassElement+" .informations").show()}).fail(function(){$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),$j(displayClassElement).children(".alert-error").show(),$j(displayClassElement+" .text-center").hide(),$j(displayClassElement+" .delivery-infos").hide(),$j(displayClassElement+" .loader").hide()}).complete(function(){$j(displayClassElement+" .loader").hide()})},displaySites:function(data,displayClassElement,templates){var indispo=!1;"storesCatalogPopin"==templates&&$j.each(data.sites,function(i,item){if(!(indispo=!item.oneHourEligible&&!item.availableInFewDays))return!1}),indispo?($j("#rem-delivery-infos-dispo").hide(),$j("#rem-delivery-infos-indispo").show()):($j(displayClassElement+" .display-sites").json2html(data,bl.json2html.getJson2HtmlFormat(templates)),$j("#rem-delivery-infos-dispo").show(),$j("#rem-delivery-infos-indispo").hide()),"pickUpSitesCatalogPopin"!=templates&&"checkoutPickUpSitePopin"!=templates&&"pickUpSitePopinCarglass"!=templates&&"newCheckoutPickUpSitePopin"!=templates&&"mRelaySelectPickUp"!=templates||bl.delivery.displayPickupPopin(data,displayClassElement),"storesCatalogPopin"==templates&&bl.delivery.displayStorePopin(data,displayClassElement),"newCheckoutPickUpSitePopin"!=templates&&(bl.delivery.updateGoogleMarkers($j(".display-sites li span.icon:visible")),bl.delivery.updateGoogleMarkers($j(".display-sites .formStoresList .list .icon:visible")))},displayPickupPopin:function(data,displayClassElement){var relayTitle=$j(".formStoresList .list .name-pickup"),relayInput=$j(".formStoresList .list input"),relayOpenedOrClosed=$j(".formStoresList .list .openedOrClosed"),relayTitleCheckout=($j(".formStoresList .info-mag"),$j(".address-list .address-container .name-pickup")),relayTitleCheckoutMobile=$j(".address-list .address-container");$j(displayClassElement+" .display-sites .formStoresList label").bind("click",function(event){if($j(this).is(".selected"))relayTitle.removeClass("selected");else{relayTitle.siblings("input").removeAttr("checked"),relayInput.removeClass("selected"),relayTitle.removeClass("selected"),$j(this).siblings("input").attr("checked","checked"),$j(this).siblings("input").addClass("selected"),$j(this).addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .day1").length&&$j(displayClassElement+" .day2").length&&($j(displayClassElement+" .day1").html(bl.delivery.formatDateRelaisStandart(site.deliveryDateMin)),$j(displayClassElement+" .day2").html(bl.delivery.formatDateRelaisStandart(site.deliveryDateMax)),$j(displayClassElement+" .informations").css("display","inline-block")),0<$j(displayClassElement+" .deliveryCharge").length&&$j(displayClassElement+" .deliveryCharge").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" #informationChronopostRelayDate").length&&$j(displayClassElement+" #informationChronopostRelayHour").length){$j(displayClassElement+" #informationChronopostRelayDate").html(bl.delivery.formatDateRelaisExpress(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" #informationChronopostRelayHour").html(hour.substring(0,indexH)),$j(displayClassElement+" .informations").css("display","inline-block")}"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)||"INP"==site.network?($j(displayClassElement+" .is-CHP").hide(),$j(displayClassElement+" .is-INP").show()):($j(displayClassElement+" .is-INP").hide(),$j(displayClassElement+" .is-CHP").show()),"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)?($j(displayClassElement+" .delivery-infos.INP").hide(),$j(displayClassElement+" .delivery-infos.CHP").show()):($j(displayClassElement+" .delivery-infos.INP").show(),$j(displayClassElement+" .delivery-infos.CHP").hide()),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&$j(displayClassElement+" .googlemaps .mapframe").blGoogleMaps("focusAddress",site)}),$j(".page-delivery .address-list .address-container .store-mag").on("click",function(event){$j(".page-delivery .address-list .address-container input").attr("checked",!1);var label=$j(this).find("label"),input=label.siblings("input");if(label.is(".selected"))relayTitle.removeClass("selected");else{relayTitleCheckout.parent("address").removeClass("selected"),label.parent("address").addClass("selected"),input.attr("checked",!0);var clickedStoreZip=label.attr("data-zipcode"),clickedStoreCode=label.attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=label.attr("id"),site=bl.delivery.getSiteFromCache(id);bl.delivery.updateModalInformation(site),0!==$j(displayClassElement+" .map").length&&$j(displayClassElement+" .map").blGoogleMaps("focusAddressRelay",site)}),$j(displayClassElement+" .display-sites .address-list .address-container label").bind("click",function(event){if($j(this).is(".selected"))relayTitle.removeClass("selected");else{relayTitleCheckout.parent("address").removeClass("selected"),$j(this).parent("address").addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);bl.delivery.updateModalInformation(site),0!==$j(displayClassElement+" .map").length&&$j(displayClassElement+" .map").blGoogleMaps("focusAddressRelay",site)}),$j(".page-delivery .address-list .address-container .white_block").on("click",function(event){$j(".page-delivery .address-list .address-container input").attr("checked",!1);var label=$j(this).find("label"),input=label.siblings("input");relayTitleCheckoutMobile.find("address.selected").removeClass("selected"),label.parent("address").addClass("selected"),input.attr("checked",!0);var clickedStoreZip=label.attr("data-zipcode"),clickedStoreCode=label.attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com");var id=label.attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .insert-delivery .price").length&&$j(displayClassElement+" .insert-delivery .price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" .insert-delivery p .datemin").length&&$j(displayClassElement+" .insert-delivery p .datemax").length&&($j(displayClassElement+" .insert-delivery p .datemin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .datemax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateLockersMin").length&&$j(displayClassElement+" .insert-delivery p .dateLockersMax").length&&($j(displayClassElement+" .insert-delivery p .dateLockersMin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .dateLockersMax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").length&&$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").length){$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").html(bl.delivery.formatDateRelaisExpressDeliveryMobile(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").html(hour.substring(0,indexH))}}),$j(displayClassElement+" .display-sites .address-container address label").bind("click",function(event){relayTitleCheckoutMobile.find("address.selected").removeClass("selected"),$j(this).parent("address").addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com");var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .insert-delivery .price").length&&$j(displayClassElement+" .insert-delivery .price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" .insert-delivery p .datemin").length&&$j(displayClassElement+" .insert-delivery p .datemax").length&&($j(displayClassElement+" .insert-delivery p .datemin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .datemax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateLockersMin").length&&$j(displayClassElement+" .insert-delivery p .dateLockersMax").length&&($j(displayClassElement+" .insert-delivery p .dateLockersMin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .dateLockersMax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").length&&$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").length){$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").html(bl.delivery.formatDateRelaisExpressDeliveryMobile(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").html(hour.substring(0,indexH))}}),$j(displayClassElement+" .display-sites .formStoresList label .openedOrClosed").bind("click",function(event){$j(this).hasClass("opened24h")||$j(this).hasClass("closeWithoutAgenda")||$j(this).hasClass("closeWithoutAgendaButWithAStartDate")||($j(".formStoresList .info-mag").slideUp("slow"),$j(this).is(".selected")?(relayOpenedOrClosed.removeClass("selected"),relayOpenedOrClosed.removeClass("dshez")):($j(this).siblings(".info-mag").slideDown("slow"),relayOpenedOrClosed.removeClass("selected"),relayOpenedOrClosed.removeClass("dshez"),$j(this).addClass("selected"),$j(this).addClass("dshez"))),$j(this).hasClass("horaireCarglass")&&($j(this).is(".selected")?$j(this).html("Je masque les horaires d&apos;ouverture du point relais"):$j(this).html("J&apos;affiche les horaires d&apos;ouverture du point relais"))}),$j("#modalChoisirPointRelais .modal .modal-body .address-list address .status").click(function(){$j(this).next(".delivery-bloc-info").slideToggle();var long=$j(this).siblings("label").attr("data-longitude"),lat=$j(this).siblings("label").attr("data-latitude");bl.google.isLoaded()?bl.delivery.createGoogleMap(lat,long):bl.google.initAPI("bl.delivery.createGoogleMap",bl.delivery.createGoogleMap,lat,long)}),$j("#modalChoisirPointRelais .modal .modal-body .address-list address .delivery-bloc-info button").click(function(){$j(this).closest(".delivery-bloc-info").slideUp()}),$j("#modalChoisirPointRelais .modal .modal-body .address-list button.btn").click(function(){var action=$j(this).parents(".display-sites").attr("data-url")+"&selectedPickupPoint="+$j(this).parents(".address-list").find("address.selected input").val()+"&shipModeId="+$j(this).parents(".address-list").find("address.selected input").attr("data-shipmode");$j("#updatePickUp-form").attr("action",action),$j("#updatePickUp-form").submit()}),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .display-sites .formStoresList label:first").trigger("click"),$j(displayClassElement+" .display-sites .address-container address label:first").trigger("click"),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&(bl.google.isLoaded()?bl.delivery.showMapForCheckoutSelectRelayPopin(displayClassElement,data):bl.google.initAPI("bl.delivery.showMapForCheckoutSelectRelayPopin",bl.delivery.showMapForCheckoutSelectRelayPopin,displayClassElement,data)),0!==$j(displayClassElement+" #map-relay").length&&(bl.google.isLoaded()?bl.delivery.showMapForNewCheckoutSelectRelayPopinTemp(displayClassElement,data):bl.google.initAPILivraison(bl.delivery.triggerPageLivraison(displayClassElement),"bl.delivery.showMapForNewCheckoutSelectRelayPopin",bl.delivery.showMapForNewCheckoutSelectRelayPopin,displayClassElement,data))},createGoogleMap:function(lat,long){var divGoogleMap=document.getElementById("map-site-"+lat+"-"+long);divGoogleMap.style.height="100%";var mapOptions={center:new google.maps.LatLng(lat,long),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(divGoogleMap,mapOptions);new google.maps.Marker({position:new google.maps.LatLng(lat,long),map:map})},displayStorePopin:function(data,displayClassElement){var storeTitle=$j(".formStoresList .list .name-store"),storeInput=$j(".formStoresList .list input"),storeOpenedOrClosed=$j(".formStoresList .list .openedOrClosed");$j(".formStoresList .info-mag");$j(displayClassElement+" .display-sites .formStoresList label").bind("click",function(event){if($j(this).is(".selected"))storeTitle.removeClass("selected");else{storeTitle.siblings("input").removeAttr("checked"),storeInput.removeClass("selected"),storeTitle.removeClass("selected"),$j(this).siblings("input").attr("checked","checked"),$j(this).siblings("input").addClass("selected"),$j(this).addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);0!==$j(displayClassElement+" .googlemaps .mapframe").length&&$j(displayClassElement+" .googlemaps .mapframe").blGoogleMaps("focusAddress",site)}),$j(displayClassElement+" .display-sites .formStoresList label .openedOrClosed").bind("click",function(event){$j(".formStoresList .info-mag").slideUp("slow"),$j(this).is(".selected")?(storeOpenedOrClosed.removeClass("selected"),storeOpenedOrClosed.removeClass("dshez")):($j(this).siblings(".info-mag").slideDown("slow"),storeOpenedOrClosed.removeClass("selected"),storeOpenedOrClosed.removeClass("dshez"),$j(this).addClass("selected"),$j(this).addClass("dshez"))}),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .display-sites .formStoresList label:first").trigger("click"),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&(bl.google.isLoaded()?bl.delivery.showMapForCheckoutSelectRelayPopin(displayClassElement,data):bl.google.initAPI("bl.delivery.showMapForCheckoutSelectRelayPopin",bl.delivery.showMapForCheckoutSelectRelayPopin,displayClassElement,data))},updateGoogleMarkers:function(markers){if(markers&&0!==markers.length)for(var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0;i<markers.size();i++)$j(markers.get(i)).html(alphabet[i%26])},formatAddress:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i]+"<br>";return fAddress+=address.zipCode+" "+address.city},formatAddressForModalRelay:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i].charAt(0).toUpperCase()+address.lines[i].slice(1).toLowerCase()+"<br>";return fAddress+=address.zipCode+" "+address.city.charAt(0).toUpperCase()+address.city.slice(1).toLowerCase()},formatAddressForGmap:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i]+" ";return fAddress+=address.zipCode+" "+address.city},formatStoresAddressForCatalogPopin:function(site){var fAddress="";return fAddress+="<span>"+site.designation+"<br></span>",fAddress+=bl.delivery.formatAddress(site.address),fAddress+='<br><a href="'+site.url+'" target="_blank">Plan d\'acces</a>'},formatPickUpTimetable:function(jour){return jour&&("00:00"!=jour.morningOpeningTime&&null!==jour.morningOpeningTime||"00:00"!=jour.morningClosingTime&&null!==jour.morningClosingTime||"00:00"!=jour.afternoonOpeningTime&&null!==jour.afternoonOpeningTime||"00:00"!=jour.afternoonClosingTime&&null!==jour.afternoonClosingTime)?"00:00"!=jour.afternoonOpeningTime&&null!==jour.afternoonOpeningTime||"00:00"!=jour.afternoonClosingTime&&null!==jour.afternoonClosingTime?jour.morningOpeningTime.replace(":","h")+" - "+jour.morningClosingTime.replace(":","h")+" et "+jour.afternoonOpeningTime.replace(":","h")+" - "+jour.afternoonClosingTime.replace(":","h"):jour.morningOpeningTime.replace(":","h")+" - "+jour.morningClosingTime.replace(":","h"):"Fermé"},formatPickUpAgenda:function(agenda){if(!agenda)return"";var localAgenda=agenda;return"<p><span>Lundi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</p><p><span>Mardi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</p><p><span>Mercredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</p><p><span>Jeudi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</p><p><span>Vendredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</p><p><span>Samedi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</p><p><span>Dimanche :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday)},formatPickUpAgendaMobile:function(agenda,isOrdersSimPage){if(!agenda)return"";var localAgenda=agenda;return(isOrdersSimPage?"<ul><li><span>Lundi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</span></li><li><span>Mardi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</span></li><li><span>Mercredi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</span></li><li><span>Jeudi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</span></li><li><span>Vendredi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</span></li><li><span>Samedi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</span></li><li><span>Dimanche :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday):"<ul><li><span>Lundi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</li><li><span>Mardi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</li><li><span>Mercredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</li><li><span>Jeudi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</li><li><span>Vendredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</li><li><span>Samedi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</li><li><span>Dimanche :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday))+"</ul>"},formatStoresTimetable:function(jour){return null===jour.morningOpeningTime&&null===jour.morningClosingTime&&null===jour.afternoonOpeningTime&&null===jour.afternoonClosingTime?"Fermé":null===jour.morningClosingTime&&null===jour.afternoonOpeningTime?"de "+bl.delivery.getHour(jour.morningOpeningTime)+" à "+bl.delivery.getHour(jour.afternoonClosingTime):"de "+bl.delivery.getHour(jour.morningOpeningTime)+" à "+bl.delivery.getHour(jour.morningClosingTime)+" et de "+bl.delivery.getHour(jour.afternoonOpeningTime)+" à "+bl.delivery.getHour(jour.afternoonClosingTime)},formatDateRelaisStandart:function(date){return bl.delivery.getNumberOfDayAndMonth(date)},formatDateChooseRelais:function(date){if(null===date)return"";date.split("-");return bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)},formatDateRelaisStandartDeliveryMobile:function(date){return bl.delivery.formatDateRelayDeliveryMobile(date)},formatFormatAmountWithOffert:function(deliveryCharge){if(null!==deliveryCharge)return 0===deliveryCharge?"OFFERT":deliveryCharge+" €"},formatDateRelaisExpress:function(date){return bl.delivery.getNumberOfDayAndMonth(date)},formatDateRelaisExpressDeliveryMobile:function(date){return bl.delivery.formatDateRelayDeliveryMobile(date)},formatDateStores:function(date){if(null===date)return"";date.split("-");var fDate="<span>"+bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)+"</span>";return fDate+=" à partir de ",fDate+="<span>"+bl.delivery.getHour(date)+"</span>"},formatDateRelayDeliveryMobile:function(date){if(null===date)return"";date.split("-");return"<span>"+bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)+"</span>"},getDayWording:function(date){if(null===date)return"";var day=date.split("-")[0];return 0===day.length?"":day.toLowerCase()},getMonthWording:function(date){if(null===date)return"";var month=date.split("-")[1];return 0===month.length?"":month.toLowerCase()},getNumberOfDay:function(date){if(null===date)return"";var infosDate=date.split("-");return 0===infosDate[2].length?"":infosDate[2].split("/")[0]},getNumberOfDayAndMonth:function(date){if(null===date)return"";var infosDate=date.split("-");if(0===infosDate[2].length)return"";var dateFormat=infosDate[2].split("/");return dateFormat[0]+"/"+dateFormat[1]},getHour:function(date){if(null===date)return"";var infosDate=date.split("-");if(0===infosDate[3].length)return"";var hourFormat=infosDate[3].split(":");return hourFormat[0]+"h"+hourFormat[1]},formatStoresSchedulesForCatalogPopin:function(agendas){if(null===agendas||0===agendas.length)return"";for(var jour=new Array,i=0;i<agendas.length;i++)jour[agendas[i].day]=agendas[i];var fSchedule="",schedule=new Array,jIndex=0;for(i=1;i<=7;i++)null===jour[i-1]?(schedule[jIndex]=jour[i],jIndex+=1):jour[i].morningOpeningTime==jour[i-1].morningOpeningTime&&jour[i].afternoonClosingTime==jour[i-1].afternoonClosingTime&&jour[i].morningClosingTime==jour[i-1].morningClosingTime&&jour[i].afternoonOpeningTime==jour[i-1].afternoonOpeningTime?(schedule[jIndex]=jour[i],jIndex+=1):(fSchedule+=bl.delivery.formatScheduleWording(schedule)+", ",(schedule=new Array)[jIndex=0]=jour[i]),7==i&&(fSchedule+=bl.delivery.formatScheduleWording(schedule)+".");return fSchedule},formatStoresSchedulesForUserArea:function(agenda){if(!agenda)return"";for(var schedule="<ul>",i=0;i<agenda.length;i++)schedule+="<li>",schedule+="<span>"+bl.delivery.getDayByNumber(agenda[i].day)+"</span>",schedule+="<span>"+bl.delivery.formatStoresTimetable(agenda[i])+"</span>",schedule+="</li>";return schedule+="</ul>"},deliveryDateFormat:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),dayName=splittedDeliveryDate[0],monthName=splittedDeliveryDate[1],date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],diplayedDayName=dayName.substring(0,1).toUpperCase()+dayName.substring(1,3)+".",dayNumber=date.split("/")[0],diplayedMonthName=monthName.substring(0,1).toUpperCase()+monthName.substring(1,monthName.lenght),formattedDeliveryDate={};return formattedDeliveryDate.day=diplayedDayName+" "+dayNumber+" "+diplayedMonthName,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDateFormat2:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),dayName=splittedDeliveryDate[0],monthName=splittedDeliveryDate[1],date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],dayNumber=date.split("/")[0],diplayedMonthName=monthName.substring(0,1).toUpperCase()+monthName.substring(1,monthName.lenght),formattedDeliveryDate={};return formattedDeliveryDate.day=dayName+" "+dayNumber+" "+diplayedMonthName,formattedDeliveryDate.time=time.substring(0,5).replace(":","H"),formattedDeliveryDate}},deliveryDateFormatDayMonth:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],dayNumber=date.split("/"),day=dayNumber[0],month=dayNumber[1],formattedDeliveryDate={};return formattedDeliveryDate.day=day+"/"+month,formattedDeliveryDate.time=time.substring(0,5).replace(":","H"),formattedDeliveryDate}},deliveryDelayFormat:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),date=(splittedDeliveryDate[0],splittedDeliveryDate[1],splittedDeliveryDate[2]),currentDate=(splittedDeliveryDate[3],new Date),WNbJours=(deliveryDate=new Date(date.split("/")[2],date.split("/")[1]-1,date.split("/")[0])).getTime()-currentDate.getTime();return Math.ceil(WNbJours/864e5)}},formatScheduleWording:function(agendas){if(agendas)return 0===agendas.length?"Fermé":1<agendas.length?null===agendas[0].morningOpeningTime&&null===agendas[0].morningClosingTime&&null===agendas[0].afternoonOpeningTime&&null===agendas[0].afternoonClosingTime?"Fermé du "+bl.delivery.getDayByNumber(agendas[0].day)+" au "+bl.delivery.getDayByNumber(agendas[agendas.length-1].day):"Du "+bl.delivery.getDayByNumber(agendas[0].day)+" au "+bl.delivery.getDayByNumber(agendas[agendas.length-1].day)+" "+bl.delivery.formatStoresTimetable(agendas[0]):1==agendas.length?null===agendas[0].morningOpeningTime&&null===agendas[0].morningClosingTime&&null===agendas[0].afternoonOpeningTime&&null===agendas[0].afternoonClosingTime?"Fermé le "+bl.delivery.getDayByNumber(agendas[0].day):"Le "+bl.delivery.getDayByNumber(agendas[0].day)+" "+bl.delivery.formatStoresTimetable(agendas[0]):void 0},getDayByNumber:function(n){var day="";switch(n){case 1:day="Lundi";break;case 2:day="Mardi";break;case 3:day="Mercredi";break;case 4:day="Jeudi";break;case 5:day="Vendredi";break;case 6:day="Samedi";break;case 7:day="Dimanche"}return day},getAvailabilityData:function(site,calculateDate){var availabilityJSON={},jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),isGoogleShoppingContext=!1;try{bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&(isGoogleShoppingContext=!0)}catch(e){console.log(e)}if(void 0!==jsonDate)return site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait possible sous 1H":"En magasin<br/>Retrait possible sous 1H")):site.oneHourEligibleInFuture?(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day available-soon":"delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time:"Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time)):site.availableInFewDays?(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day unavailable":"delivery-day available-soon",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time+"<br/>Sur commande uniquement":"Indisponible en magasin<br/>Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time+"<br/>Sur commande uniquement")):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin":"Indisponible")),availabilityJSON},getAvailabilityMobileData:function(site,calculateDate){var availabilityJSON={},jsonDate=bl.delivery.deliveryDateFormatDayMonth(site.deliveryDateMin),isGoogleShoppingContext=!1;if(bl.catalog.productPage.googleShoppingContextualization&&bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&(isGoogleShoppingContext=!0),void 0!==jsonDate)return site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait sous 1H":"En magasin<br/>Retrait sous 1H")):site.oneHourEligibleInFuture?(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day available-soon":"delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin<br/>Retrait dès le "+jsonDate.day+"<br/>A partir de "+jsonDate.time:"En magasin<br/>Retrait dès le "+jsonDate.day+"<br/>A partir de "+jsonDate.time)):site.availableInFewDays?(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin<br/>Retrait dès le "+jsonDate.day+"<br/>A partir de "+jsonDate.time+"<br/>Sur commande":"Retrait dès le "+jsonDate.day+"<br/>A partir de "+jsonDate.time+"<br/>Sur commande")):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin":"Indisponible")),availabilityJSON},getAvailabilityDataForREM:function(site,calculateDate){var availabilityJSON={},jsonDate=null;if(void 0!==(jsonDate=bl.delivery.deliveryDateFormatDayMonth(site.deliveryDateMin)))return site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="availability",!0===calculateDate&&(availabilityJSON.formattedDate="En magasin<br/>Retrait possible sous 1H")):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Retrait dès le "+jsonDate.day+"<br/>à partir de "+jsonDate.time)):site.availableInFewDays?(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Retrait dès le "+jsonDate.day+"<br/>à partir de "+jsonDate.time+"<br/>Sur commande uniquement")):(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getConsultAvailabilityData:function(site,calculateDate){var availabilityJSON={},delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);return delayDay=1==delayDay?"Disponible dès demain":"Disponible sous "+delayDay+" jours",site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate="En magasin")):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay+"<br/>Sur commande uniquement")):site.availableInFewDays?(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate&&bl.delivery.deliveryDelayFormat(site.deliveryDateMin)?availabilityJSON.formattedDate=delayDay+"<br/>Sur commande uniquement":availabilityJSON.formattedDate="Indisponible"):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getConsultMobileAvailabilityData:function(site,calculateDate){var availabilityJSON={},delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);return delayDay=1==delayDay?"Disponible dès demain":"Disponible sous "+delayDay+" jours",site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate="En magasin")):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay+"<br/>Sur commande")):site.availableInFewDays?(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay+"<br/>Sur commande")):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getMonthByNumber:function(n){switch(n){case 1:"Janvier";break;case 2:"Fervrier";break;case 3:"Mars";break;case 4:"Avril";break;case 5:"Mai";break;case 6:"Juin";break;case 7:"Juillet";break;case 8:"Août";break;case 9:"Septembre";break;case 10:"Octobre";break;case 11:"Novembre";break;case 12:"Décembre"}return day},open24h:function(nextOpeningHour){return nextOpeningHour&&-1!=nextOpeningHour.indexOf("24h/24h")?"opened24h":""},showMapForCheckoutSelectRelayPopin:function(element,data){$j(element+" .googlemaps .mapframe").blGoogleMaps("initGMap",{context:$j(element+" .googlemaps .mapframe").parents(".view")}),$j(element+" .googlemaps .mapframe").blGoogleMaps("update",data)},showMapForNewCheckoutSelectRelayPopin:function(element,data){$j(element+" .map").blGoogleMaps("initGMapforRelay",{context:$j(element+" .map").parents(".modal")}),$j(element+" .map").blGoogleMaps("updateforRelay",data)},triggerPageLivraison:function(element){return function(){$j(element+" .display-sites .address-list .address-container label:first").trigger("click")}},showMapForNewCheckoutSelectRelayPopinTemp:function(element,data){$j(element+" .map").blGoogleMaps("initGMapforRelay",{context:$j(element+" .map").parents(".modal")}),$j(element+" .map").blGoogleMaps("updateforRelay",data),$j(element+" .display-sites .address-list .address-container label:first").trigger("click")},updateModalInformation:function(site){var tabs=$j("#modalRelaiCheckout .tabs li.current"),networkClass="";if("INP_CHP"==tabs.attr("data-carrier")&&(networkClass=".nav-schedules."+site.network),"CHP"==site.network){if(""!==site.deliveryDateMin&&null!==site.deliveryDateMin){tabs.find(networkClass+" .schedules-1").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;tabs.find(networkClass+" .schedules-2").html(hour.substring(0,indexH))}}else""!==site.deliveryDateMin&&null!==site.deliveryDateMin&&""!==site.deliveryDateMax&&null!==site.deliveryDateMax&&(tabs.find(networkClass+" .schedules-1").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMin)),tabs.find(networkClass+" .schedules-2").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMax)));0<tabs.find(".nav-price").length&&tabs.find(".nav-price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),""!==networkClass&&"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)?($j(".nav-schedules.INP").hide(),$j(".nav-schedules.CHP").show()):($j(".nav-schedules.INP").show(),$j(".nav-schedules.CHP").hide())}}),function($j){var id=null,context=null,maps={},geocoder=null,searchCache={},zipCodeAddress=null,marker=[],options={},labels="ABCDEFGHIJKLMNOPQRSTUVWXYZ",methods={init:function(options){},initGMap:function(pOptions){context=pOptions.context,options=$j.extend({mapSelector:".googlemaps .mapframe",id:context.attr("id")},pOptions),id=options.id;var mapOptions={zoom:10,center:new google.maps.LatLng(48.8567,2.3508),mapTypeId:google.maps.MapTypeId.ROADMAP},mapLocation=$j(options.mapSelector,context)[0];return $j.each($j(options.mapSelector,context),function(){$j(this).is(":visible")&&(mapLocation=this)}),maps[id]=new google.maps.Map(mapLocation,mapOptions),geocoder=new google.maps.Geocoder,this},initGMapforRelay:function(pOptions){context=pOptions.context,options=$j.extend({mapSelector:".map",id:context.attr("id")},pOptions),id=options.id;var mapOptions={zoom:10,center:new google.maps.LatLng(48.8567,2.3508),mapTypeId:google.maps.MapTypeId.ROADMAP},mapLocation=$j(options.mapSelector,context)[0];return $j.each($j(options.mapSelector,context),function(){$j(this).is(":visible")&&(mapLocation=this)}),maps[id]=new google.maps.Map(mapLocation,mapOptions),geocoder=new google.maps.Geocoder,this},update:function(data){context=$j(this).parents(".view"),id=context.attr("id");for(var i=0;i<marker.length;i++)marker[i].setMap(null);marker=[],data.sites.length+1;var temp=[];null!=(zipCodeAddress=$j("#sitesSearch",context).val())&&""!==zipCodeAddress&&(zipCodeAddress+=", France",methods.searchAddress(temp,zipCodeAddress,"/wcsstore/assets/dist/images/common/googleMaps/blue-dot.png"));for(i=0;i<data.sites.length;i++)myMarker={identifier:data.sites[i].network+"-"+data.sites[i].code,address:bl.delivery.formatAddressForGmap(data.sites[i].address),image:"geoloc.png",index:i},null===data.sites[i].address.location||0===data.sites[i].address.location.lat||0===data.sites[i].address.location.lon?methods.searchAddress(temp,myMarker):(myMarker.location=new google.maps.LatLng(data.sites[i].address.location.lat,data.sites[i].address.location.lon),methods.searchLocation(temp,myMarker));0<temp.length&&(methods.addAddresses(temp),methods.focusAddress(data.sites[0],!0))},updateforRelay:function(data){context=$j(this).parents(".modal");id=context.attr("id");for(var i=0;i<marker.length;i++)marker[i].setMap(null);marker=[],data.sites.length+1;var temp=[];null!=(zipCodeAddress=$j("#relaySearchFormZipcode",context).val())&&""!==zipCodeAddress&&(zipCodeAddress+=", France",methods.searchAddress(temp,zipCodeAddress,"/wcsstore/assets/dist/images/common/googleMaps/blue-dot.png"));for(i=0;i<data.sites.length;i++)myMarker={identifier:data.sites[i].network+"-"+data.sites[i].code,address:bl.delivery.formatAddressForGmap(data.sites[i].address),image:"geoloc.png",index:i},null===data.sites[i].address.location||0===data.sites[i].address.location.lat||0===data.sites[i].address.location.lon?methods.searchAddress(temp,myMarker):(myMarker.location=new google.maps.LatLng(data.sites[i].address.location.lat,data.sites[i].address.location.lon),methods.searchLocation(temp,myMarker));0<temp.length&&(methods.addAddresses(temp,!0),methods.focusAddress(data.sites[0],!0))},searchAddress:function(temp,myMarker){void 0!==searchCache[myMarker.address]?temp.push(searchCache[myMarker.address]):geocoder.geocode({address:myMarker.address},function(results,status){status==google.maps.GeocoderStatus.OK&&(myMarker.location=results[0].geometry.location,searchCache[myMarker.address]=myMarker,temp.push(searchCache[myMarker.address]),methods.addAddress(myMarker),0===myMarker.index&&methods.focusAddress(myMarker.address,!0))})},searchLocation:function(temp,myMarker){void 0!==searchCache[myMarker.address]||(searchCache[myMarker.address]=myMarker),temp.push(searchCache[myMarker.address])},addAddresses:function(temp,modalRelay){for(var i=0;i<temp.length;i++)temp[i].index=i,methods.addAddress(temp[i],modalRelay);google.maps.event.trigger(maps[id],"resize"),methods.focusAddress(zipCodeAddress,!1)},addAddress:function(myMarker,modalRelay){var i=marker.length,textLabel=void 0===myMarker.index?"":labels[myMarker.index%labels.length];modalRelay?marker.push(new google.maps.Marker({map:maps[id],position:myMarker.location,icon:{labelOrigin:new google.maps.Point(12,12),url:"/wcsstore/BoulangerStg/commerce/desktop/catalog/product/img/"+myMarker.image}})):marker.push(new google.maps.Marker({map:maps[id],position:myMarker.location,label:{text:textLabel,fontWeight:"bold",color:"#FFFFFF"},icon:{labelOrigin:new google.maps.Point(12,12),url:"/wcsstore/BoulangerStg/commerce/desktop/catalog/product/img/"+myMarker.image}})),google.maps.event.addListener(marker[i],"click",function(){if(maps[id].setZoom(12),maps[id].setCenter(marker[i].getPosition()),!$j.isBlank(myMarker.identifier)){var li=$j(".googlemaps .list label#"+myMarker.identifier,context);if(0<li.length)(container=li.parents(".list")).scrollTop(li.offset().top-container.offset().top+container.scrollTop()),container.animate({scrollTop:li.offset().top-container.offset().top+container.scrollTop()}),li.trigger("click");var container,address=$j("address#"+myMarker.identifier,context);if(0<address.length)(container=address.parents(".address-container")).scrollTop(address.offset().top-container.offset().top+container.scrollTop()),container.animate({scrollTop:address.offset().top-container.offset().top+container.scrollTop()}),address.trigger("click")}})},focusAddress:function(e,zoom){var address=e;e&&"string"!=typeof e&&(address=bl.delivery.formatAddressForGmap(e.address)),void 0!==searchCache[address]&&((void 0===zoom||zoom)&&maps[id].setZoom(12),maps[id].setCenter(searchCache[address].location))},focusAddressRelay:function(e,zoom){var address=e;if(e&&"string"!=typeof e&&(address=bl.delivery.formatAddressForGmap(e.address)),void 0!==searchCache[address]){for((void 0===zoom||zoom)&&maps[id].setZoom(12),i=0;i<marker.length;i++)marker[i].setIcon(bl.vars.imgDir+"GoogleMapImages/icon-map-blue.png");var index=searchCache[address].index;marker[index].setIcon(bl.vars.imgDir+"GoogleMapImages/icon-map-orange.png"),maps[id].setCenter(searchCache[address].location)}}};$j.fn.blGoogleMaps=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $j.error("Method "+method+" does not exist on jQuery.blGoogleMaps"):methods.init.apply(this,arguments)}}(jQuery),$j(document).ready(function(){var btnsDelivery=document.querySelectorAll(".btn__delivery");if(btnsDelivery&&0<btnsDelivery.length)for(var i=0;i<btnsDelivery.length;i++)btnsDelivery[i].addEventListener("click",function(){$j(".alert.alert-error.alert-merchant").toggle()})}),"undefined"==typeof bl&&(bl={}),void 0===bl.json2html&&(bl.json2html={}),$j.extend(bl.json2html,{getJson2HtmlFormat:function(template){return"pickUpSitesCatalogPopin"==template?pickUpSitesCatalogPopin.displayPickUpSitesInCatalogPopin:"userAreaFavoriteStoreMobile"==template?favoriteStorePopinInUserAreaMobile.displayStores:"checkoutPickUpSitePopinMobile"==template?pickUpSitesCheckOutPopinMobile.displayPickUpSitesPopinInCheckout:"storesCatalogPopin"==template?storesInCatalogPopin.displayStoresInCatalogPopin:"storesCatalogPickUpPopin"==template?storesInCatalogPopin.displayStoresInCatalogPickUpPopin:"storesCatalogPickUpAvailabilityPopin"==template?storesInCatalogPopin.displayStoresInCatalogPickAvailabilityUpPopin:"checkoutPickUpSitePopin"==template?pickUpSitesCheckOutPopin.displayPickUpSitesPopinInCheckout:"newCheckoutPickUpSitePopin"==template?newPickUpSitesCheckOutPopin.displayPickUpSitesPopinInCheckout:"userAreaFavoriteStore"==template?favoriteStorePopinInUserArea.displayStores:"mStorePickUp"==template?mobileTemplates.displayStorePickUpPage:"mStoreAvailability"==template?mobileTemplates.displayStoreAvailabilityPage:"mExpressRelayPickUpPopin"==template?mobileTemplates.displayExpressRelayPickUpPopin:"mStandardRelayPickUpPopin"==template?mobileTemplates.displayStandardRelayPickUpPopin:"mLockersPickUpPopin"==template?mobileTemplates.displayLockersPickUpPopin:"mStorePickUpPopin"==template?mobileTemplates.displayStorePickUpPopin:"mRelayPickUp"==template?mobileTemplates.displayRelayPickUpPage:"mRelaySelectPickUp"==template?mobileTemplates.displayRelaySelectPickUpPage:"mRelayCatalogPickUp"==template?mobileTemplates.displayRelayCatalogPickUpPage:"carglass"==template?favoriteStoreCarglass.displayStores:"pickUpSitePopinCarglass"==template?pickUpSitePopinCarglass.displayPickUpSitePopinCarglass:"mStorePickUpCarglass"==template?mobileTemplates.displayStorePickUpPageCarglass:"mRelayPickUpCarglass"==template?mobileTemplates.displayRelayPickUpPageCarglass:void 0}});var basePath="/webapp/wcs/stores/servlet/",pickUpSitesCheckOutPopin={displayPickUpSitesPopinInCheckout:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"mapframe_tunnel",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitesCheckOutPopin.displayPickUpSites)}}]}]}],displayPickUpSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},pickUpSitesCatalogPopin={displayPickUpSitesInCatalogPopin:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"map",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitesCatalogPopin.displayPickUpSites)}}]}]}],displayPickUpSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},storesInCatalogPopin={displayStoresInCatalogPopin:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"map",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayStoresSites)}}]}]}],displayStoresSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"REMId",value:"${network}-${code}",id:"REM_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"REM_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){return"name-store"},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return null==this.formatDistance?"":"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:function(){var availabilityData=bl.delivery.getAvailabilityDataForREM(this,!1);return void 0===availabilityData?"availability notAvailable":availabilityData.cssClass},html:function(){var availabilityData=bl.delivery.getAvailabilityDataForREM(this,!0);return void 0===availabilityData?"Indisponible":availabilityData.formattedDate}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"adresse",html:"${address.lines}<br>${address.zipCode} ${address.city}"}]}]}]}],displayStores:[{tag:"tr","data-id":"${code}",children:[{tag:"td",class:"date",html:function(){return bl.delivery.formatDateStores(this.deliveryDateMin)}},{tag:"td",class:"location",html:function(){return bl.delivery.formatStoresAddressForCatalogPopin(this)}},{tag:"td",class:"schedules",html:function(){return bl.delivery.formatStoresSchedulesForCatalogPopin(this.agendas)}}]}],displayStoresInCatalogPickUpPopin:[{tag:"div",class:"list",children:[{tag:"div",class:"info-tri",children:[{tag:"p",html:"Nos stocks magasin sont actualisés toutes les demi-heures."},{tag:"div",class:"triSelect",children:[{tag:"select",class:"dropdown",id:"dropdown",name:"type",children:[{tag:"option",value:"1",html:"Trier par distance"},{tag:"option",value:"0",html:"Trier par disponibilité"},{tag:"option",value:"2",html:"Trier par ordre alphabétique"},{tag:"option",value:"3",html:"Ouvert le plus tard"},{tag:"option",value:"4",html:"Ouvert le plus tôt"}]}]}]},{tag:"div",class:"content-list",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayPickUpStores)}}]},{tag:"div",class:"deliveryTerms",html:"Les produits sont conservés 15 jours en magasin après la date de mise a disposition."}]}],displayPickUpStores:[{tag:"li",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},"data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",children:[{tag:"p",class:"name-mag",children:[{tag:"b",html:"${designation}",children:[{tag:"span",class:"length",html:function(){if(this.formatDistance)return" - "+this.formatDistance}}]},{tag:"span",class:function(){return"openedClosed "+this.openState},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}]},{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}},{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:"popup button buttonOrange next",html:"Choisir ce magasin"},{tag:"div",class:"info-mag",children:[{tag:"span",class:"adresse-mag",html:"${address.lines}<br>${address.zipCode} ${address.city}"},{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"fermeture-info",html:"Fermer",children:[{tag:"img",src:function(){return $j("#urlImgFermer").val()},height:"15",border:"0",width:"14"}]}]}]}],displayStoresInCatalogPickAvailabilityUpPopin:[{tag:"div",class:"list",children:[{tag:"div",class:"info-tri",children:[{tag:"p",html:"Nos stocks magasin sont actualisés toutes les demi-heures."},{tag:"div",class:"triSelect",children:[{tag:"select",class:"dropdown",id:"dropdown",name:"type",children:[{tag:"option",value:"1",html:"Trier par distance"},{tag:"option",value:"0",html:"Trier par disponibilité"},{tag:"option",value:"2",html:"Trier par ordre alphabétique"},{tag:"option",value:"3",html:"Ouvert le plus tard"},{tag:"option",value:"4",html:"Ouvert le plus tôt"}]}]}]},{tag:"div",class:"content-list",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayPickUpStoresAvailability)}}]},{tag:"div",class:"deliveryTerms",html:"Les produits sont conservés 15 jours en magasin après la date de mise a disposition."}]}],displayPickUpStoresAvailability:[{tag:"li",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},"data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",children:[{tag:"p",class:"name-mag",children:[{tag:"b",html:"${designation}",children:[{tag:"span",class:"length",html:function(){if(this.formatDistance)return" - "+this.formatDistance}}]},{tag:"span",class:function(){return"openedClosed "+this.openState},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}]},{tag:"p",class:function(){var availabilityData=bl.delivery.getConsultAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getConsultAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}},{tag:"a","data-modal-url":function(){return basePath+"catalog/storePickupConfirmation"},href:"javascript:void(0);",class:"storePickupAvailability",html:function(){if("Indisponible"!==bl.delivery.getConsultAvailabilityData(this,!0).formattedDate)return"> Commander en ligne et retirer ce produit en magasin"}},{tag:"div",class:"info-mag",children:[{tag:"span",class:"adresse-mag",html:"${address.lines}<br>${address.zipCode} ${address.city}"},{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"fermeture-info",html:"Fermer",children:[{tag:"img",src:function(){return $j("#urlImgFermer").val()},height:"15",border:"0",width:"14"}]}]}]}]},pickUpSitesCheckOutPopinMobile={displayPickUpSitesPopinInCheckout:[{tag:"div",children:function(){return json2html.transform(this.sites,pickUpSitesCheckOutPopinMobile.displayPickUpSites)}}],displayPickUpSites:[{tag:"div",class:"oneAdress",children:[{tag:"div",class:"infotextInfos",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]},{tag:"div",class:"nameAdress",children:[{tag:"p",html:function(){return"<span>"+this.designation+"</span>&nbsp&nbsp<span class='distance'>"+this.formatDistance+"</span><br/><span class='relayAdress'>"+bl.delivery.formatAddress(this.address)+"</span>"}},{tag:"a",id:"${network}-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}","data-url":"/webapp/wcs/stores/servlet/BLAccountManageFavoriteRelayFormCmd",href:"#",class:"btnOrange",html:"CHOISIR"}]},{tag:"div",class:"accessMap",children:[{tag:"span",class:"accessMapSpan",html:"Plan d'acc&egrave;s et horaires"},{tag:"div",children:[{tag:"div",class:"collectAdressSelected",html:function(){return""}},{tag:"div",class:"map",html:"",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]}]},{tag:"div",class:"scheduleAdress",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]}]},favoriteStorePopinInUserAreaMobile={displayStores:[{tag:"div",children:function(){return json2html.transform(this.sites,favoriteStorePopinInUserAreaMobile.diplayStoreData)}}],diplayStoreData:[{tag:"div",class:"oneAdress",children:[{tag:"div",class:"infotextInfos",children:[{tag:"div",class:"infotextInfos",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]},{tag:"div",class:"nameAdress",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance=""+this.formatDistance),"<span>"+this.designation+"&nbsp&nbsp</span><span class='distance'>"+displayedDistance+"</span>"}return""}},{tag:"a",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}","data-url":"/webapp/wcs/stores/servlet/mUserRegistrationUpdate?action=editFavoriteStore",href:"#",class:"btnOrange",html:"CHOISIR"}]},{tag:"div",class:"accessMap",children:[{tag:"span",class:"accessMapSpan",html:"Plan d'acc&egrave;s et horaires"},{tag:"div",children:[{tag:"div",class:"collectAdressSelected",html:function(){return"<p>"+bl.delivery.formatAddress(this.address)+"</p>"}},{tag:"div",class:"map",html:"",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]}]},{tag:"div",class:"scheduleAdress",html:"<span>${storeHours}</span>"}]}]}]}]},favoriteStorePopinInUserArea={displayStores:[{tag:"h4",html:"Sélectionnez un magasin dans la liste"},{tag:"p",html:"${sites.length} magasins correspondent à votre recherche, <br>du plus proche au plus éloigné dans un rayon de 100 km"},{tag:"div",class:"center_part","data-userclick":"1",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,favoriteStorePopinInUserArea.diplayStoreData)}}]},{tag:"div",class:"right_part",children:[{tag:"div",children:[{tag:"span",class:"subtitle",html:"Magasin sélectionné :"},{tag:"h5",html:""},{tag:"p",class:"address",html:""},{tag:"span",class:"subtitle",html:"Horaires du magasin :"},{tag:"div",class:"time",html:""}]},{tag:"div",class:"button",children:[{tag:"input",class:"submit_store_btn",type:"button","data-modal-url":"/webapp/wcs/stores/servlet/UserRegistrationUpdate?action=editFavoriteStore",value:"définir comme mon magasin favori",name:"submit"}]}]}],diplayStoreData:[{tag:"li",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance="(env. "+this.formatDistance+")"),this.address.zipCode.substring(0,2)+" - "+this.designation+"<br>"+displayedDistance}return""}},{tag:"div",class:"data-address hidden",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"data-store-hours hidden",html:"${storeHours}"}]}]},favoriteStoreCarglass={displayStores:[{tag:"h4",html:"Sélectionnez un magasin dans la liste"},{tag:"p",html:"${sites.length} magasins correspondent à votre recherche, <br>du plus proche au plus éloigné dans un rayon de 100 km"},{tag:"div",class:"center_part","data-userclick":"1",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,favoriteStoreCarglass.diplayStoreData)}}]},{tag:"div",class:"right_part",children:[{tag:"div",children:[{tag:"span",class:"subtitle",html:"Magasin sélectionné :"},{tag:"h5",html:""},{tag:"p",class:"address",html:""},{tag:"span",class:"subtitle",html:"Horaires du magasin :"},{tag:"div",class:"time",html:""}]},{tag:"input",class:"submit_store_btn_carglass",type:"button","data-modal-url":"/webapp/wcs/stores/servlet/BLCarglassDeliveryCmd?deliveryType=store",value:"Choisir ce magasin",name:"submit"}]}],diplayStoreData:[{tag:"li",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance="(env. "+this.formatDistance+")"),this.address.zipCode.substring(0,2)+" - "+this.designation+"<br>"+displayedDistance}return""}},{tag:"div",class:"data-address hidden",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"data-store-hours hidden",html:"${storeHours}"}]}]},pickUpSitePopinCarglass={displayPickUpSitePopinCarglass:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"mapframe_tunnel",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitePopinCarglass.displayPickUpSitesCarglass)}}]}]}],displayPickUpSitesCarglass:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:"openedOrClosed horaireCarglass",html:"J&apos;affiche les horaires d&apos;ouverture du point relais"},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},newPickUpSitesCheckOutPopin={displayPickUpSitesPopinInCheckout:[{tag:"div",class:"relai-map",children:[{tag:"div",class:"map",id:"map-relay"},{tag:"p",class:"test ${param.preferredNetwork}",html:function(){var carrier=$j("[data-tab='tab-1'].current").attr("data-carrier");return"CHP"===carrier?"Les produits sont conservés 7 jours en point relais après la date de livraison":"INP"===carrier||"INP_CHP"===carrier||"CHP_LOC"===carrier?"Les produits sont conservés 3 jours en point consigne après la date de livraison":"Les produits sont conservés 10 jours en point relais après la date de livraison"}}]},{tag:"form",id:"updatePickUp-form",action:"#",method:"post",children:[{tag:"div",class:"address-list",children:[{tag:"div",class:"text-right",children:[{tag:"label",for:"",html:"Trier par:"},{tag:"select",children:[{tag:"option",value:"",html:"Distance"}]}]},{tag:"div",class:"address-container",children:function(){return json2html.transform(this.sites,newPickUpSitesCheckOutPopin.displayPickUpSites)}},{tag:"div",class:"text-center",children:[{tag:"button",class:"btn btn-orange",html:"VALIDER"}]}]}]}],displayPickUpSites:[{tag:"address",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",class:function(){var available="name-pickup input-radio",typeLibelle=available+" relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle=available+" relay-name type-CHP"),"INP"==this.network&&(typeLibelle=available+" relay-name type-INP"),typeLibelle}},{tag:"div",class:"name",html:function(){return this.designation},children:[{tag:"span",class:"distance",html:function(){return" - "+this.formatDistance}}]},{tag:"div",class:"address-sites",html:function(){return bl.delivery.formatAddressForModalRelay(this.address)}},{tag:"div",class:function(){return"status "+this.openStateRelay+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"div",class:"delivery-bloc-info",children:[{tag:"button",class:"btn-close",type:"button"},{tag:"div",class:"table",children:[{tag:"div",id:"map-site-${address.location.lat}-${address.location.lon}",class:"cell cell-left"},{tag:"div",class:"cell cell-right",children:[{tag:"table",children:[{tag:"tbody",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<tr><td>Lundi</td><td>"+this.openingHoursByDay.Lundi+"</td></tr>"),this.openingHoursByDay.Mardi&&(horaire+="<tr><td>Mardi</td><td>"+this.openingHoursByDay.Mardi+"</td></tr>"),this.openingHoursByDay.Mercredi&&(horaire+="<tr><td>Mercredi</td><td>"+this.openingHoursByDay.Mercredi+"</td></tr>"),this.openingHoursByDay.Jeudi&&(horaire+="<tr><td>Jeudi</td><td>"+this.openingHoursByDay.Jeudi+"</td></tr>"),this.openingHoursByDay.Vendredi&&(horaire+="<tr><td>Vendredi</td><td>"+this.openingHoursByDay.Vendredi+"</td></tr>"),this.openingHoursByDay.Samedi&&(horaire+="<tr><td>Samedi</td><td>"+this.openingHoursByDay.Samedi+"</td></tr>"),this.openingHoursByDay.Dimanche&&(horaire+="<tr><td>Dimanche</td><td>"+this.openingHoursByDay.Dimanche+"</td</tr>")),horaire}}]}]}]}]}]}]},mobileTemplates={displayStorePickUpPage:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUp)}}],storePickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},"data-site-id":"${code}",children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){if(void 0!==$j("#popinDeliveryStore")&&"true"==$j("#popinDeliveryStore").val())return"";var urlSubmit=null;urlSubmit=0<$j("#deliveryPage").size()?"mBLMobileStoreUpdate?":0<$j("#orderItemIdToUpdate").size()?"mBLPickupInStoreOrderItemUpdate?":"mBLPickupInStoreOrderItemAdd?";var orderItemToUpdateSplitted=null;if(0!=$j("#orderItemIdToUpdate").size()){var orderItemToUpdate=$j("#orderItemIdToUpdate").val();orderItemToUpdate=orderItemToUpdate.split(",");for(var i=0;i<orderItemToUpdate.length;i++)orderItemToUpdateSplitted+=orderItemToUpdate[i],i<=orderItemToUpdate.length-1&&(orderItemToUpdateSplitted+=",")}var urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return urlParams=urlParams+"&langId="+$j("#langId").val(),orderItemToUpdateSplitted&&(urlParams=urlParams+"&orderItemIdToUpdate="+orderItemToUpdateSplitted),0<$j("#catentryId").size()&&(urlParams=urlParams+"&catEntryId="+$j("#catentryId").val()),0<$j("#orderId").size()&&(urlParams=urlParams+"&orderId="+$j("#orderId").val()),0<$j("#numDeliveryPage").size()&&(urlParams=urlParams+"&numDeliveryPage="+$j("#numDeliveryPage").val()),0<$j("#shipModeId").size()&&(urlParams=urlParams+"&shipModeId="+$j("#shipModeId").val()),'<a href="javascript:void(0);" data-cart-url='+(urlSubmit+=urlParams=(urlParams=urlParams+"&siteId="+this.code+"&zipCode="+this.address.zipCode)+"&city="+encodeURIComponent(this.address.city)+"&favCodeMagasin="+this.code)+' data-type-panier-test-ab="true" class="buttonChooseOrange x-addToMobileStore">CHOISIR</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storePickUpDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storePickUpDetails:[{tag:"p",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}],displayStorePickUpPopin:[{tag:"form",html:function(){for(var html="",i=0;i<3;)void 0!==this.sites[i]&&""!==this.sites[i]&&(html+=json2html.transform(this.sites[i],mobileTemplates.storePickUpPopin)),i+=1;return html}}],storePickUpPopin:[{tag:"input",type:"radio",id:function(){return"storePickupType_"+this.network+"-"+this.code},name:"storePickupType"},{tag:"label",class:"white_block",for:function(){return"storePickupType_"+this.network+"-"+this.code},children:[{tag:"span",class:"line-1",children:[{tag:"span",class:"city",html:"${designation}"},{tag:"span",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]},{tag:"span",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"line-2 delivery-day no-available":"line-2 "+availabilityData.cssClass},html:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return void 0===availabilityData?"Indisponible":availabilityData.formattedDate}},{tag:"span",class:"line-3",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"ctn-3",children:[{tag:"span",class:"left",html:function(){return"Lundi<br/>Mardi<br/>Mercredi<br/>Jeudi<br/>Vendredi<br/>Samedi<br/>Dimanche"}},{tag:"span",class:"right",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi?horaire+=this.openingHoursByDay.Lundi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Mardi?horaire+=this.openingHoursByDay.Mardi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Mercredi?horaire+=this.openingHoursByDay.Mercredi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Jeudi?horaire+=this.openingHoursByDay.Jeudi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Vendredi?horaire+=this.openingHoursByDay.Vendredi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Samedi?horaire+=this.openingHoursByDay.Samedi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Dimanche?horaire+=this.openingHoursByDay.Dimanche+"<br/>":horaire+="Ferm&eacute;<br/>"),horaire}},{tag:"div",class:"border"},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"adress",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}],displayStoreAvailabilityPage:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storeAvailability)}}],storeAvailability:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getConsultMobileAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getConsultMobileAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){var urlSubmit=null;urlSubmit=0<$j("#deliveryPage").size()?"mBLMobileStoreUpdate?":0<$j("#orderItemIdToUpdate").size()?"mBLPickupInStoreOrderItemUpdate?":"mBLPickupInStoreOrderItemAdd?";var orderItemToUpdateSplitted=null;if(0!=$j("#orderItemIdToUpdate").size()){var orderItemToUpdate=$j("#orderItemIdToUpdate").val();orderItemToUpdate=orderItemToUpdate.split(",");for(var i=0;i<orderItemToUpdate.length;i++)orderItemToUpdateSplitted+=orderItemToUpdate[i],i<=orderItemToUpdate.length-1&&(orderItemToUpdateSplitted+=",")}var urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return urlParams=urlParams+"&langId="+$j("#langId").val(),orderItemToUpdateSplitted&&(urlParams=urlParams+"&orderItemIdToUpdate="+orderItemToUpdateSplitted),0<$j("#catentryId").size()&&(urlParams=urlParams+"&catEntryId="+$j("#catentryId").val()),0<$j("#orderId").size()&&(urlParams=urlParams+"&orderId="+$j("#orderId").val()),0<$j("#numDeliveryPage").size()&&(urlParams=urlParams+"&numDeliveryPage="+$j("#numDeliveryPage").val()),0<$j("#shipModeId").size()&&(urlParams=urlParams+"&shipModeId="+$j("#shipModeId").val()),'<a href="javascript:void(0);" data-cart-url='+(urlSubmit+=urlParams=(urlParams=urlParams+"&siteId="+this.code+"&zipCode="+this.address.zipCode)+"&city="+encodeURIComponent(this.address.city)+"&favCodeMagasin="+this.code)+' class="buttonChooseOrange buttonPickup x-addToMobileStore">RETIRER<BR/>EN MAGASIN</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storeAvailabilityDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storeAvailabilityDetails:[{tag:"p",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}],displayRelayPickUpPage:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayPickUp)}}],relayPickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?"à "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accès et les horaires d&apos;ouverture"},{tag:"div",children:[{tag:"a",class:"buttonOrange",html:"Je choisis",href:function(){return $j("#urlPickupPointSelection").val()+"&shipModeId="+this.shipModeId+"&checkedId="+this.network+"-"+this.code}}]}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayRelayCatalogPickUpPage:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayCatalogPickUp)}}],relayCatalogPickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?"à "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours catalog",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accès et les horaires d&apos;ouverture"}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayExpressRelayPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-express-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayStandardRelayPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-standard-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayLockersPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-lockers-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayRelayPickUpPopin:[{tag:"span",html:"${designation}"},{tag:"span",html:function(){return" - "+this.formatDistance+"<br/>"}},{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}],displayStorePickUpPageCarglass:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUpCarglass)}}],storePickUpCarglass:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){var urlSubmit="mCarglassValidateCmd?",voucherCode=$j("#voucherCode").attr("value"),urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return"<a href="+(urlSubmit+=urlParams=(urlParams=urlParams+"&langId="+$j("#langId").val())+"&storeCode="+this.code+"&voucherCode="+voucherCode+"&deliveryType=store")+' class="buttonChooseOrange x-addToMobileStore">Je choisis</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storeAvailabilityDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storePickUpDetailsCarglass:[{tag:"p",class:"",children:[{tag:"span",html:"J&apos;affiche les horaires d&apos;ouverture et coordonn&eacute;es du magasin"}]}],displayRelayPickUpPageCarglass:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayPickUpCarglass)}}],relayPickUpCarglass:[{tag:"div",class:function(){return"white_block"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?"à "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accès et les horaires d&apos;ouverture"},{tag:"div",children:[{tag:"a",class:"buttonOrange",html:"Je choisis",href:function(){return $j("#urlPickupPointSelection").val()+"&shipModeId="+this.shipModeId+"&relayId="+this.network+"-"+this.code}}]}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayRelaySelectPickUpPage:[{tag:"label",html:"Trier par:"},{tag:"select",id:"",children:[{tag:"option",value:"",html:"Distance"}]},{tag:"div",class:"address-container",children:function(){return json2html.transform(this.sites,mobileTemplates.relaySelectPickUp)}}],relaySelectPickUp:[{tag:"address",class:"white_block",children:[{tag:"input",id:"${network}-${code}",name:"checkedId",value:"${network}-${code}",type:"radio"},{tag:"label",for:"${network}-${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",class:"input-radio"},{tag:"div",class:"name",html:function(){return this.designation},children:[{tag:"span",class:"distance",html:function(){return" - "+this.formatDistance}}]},{tag:"div",class:"address-sites",html:function(){return bl.delivery.formatAddressForModalRelay(this.address)}},{tag:"div",class:function(){return"status "+this.openStateRelay+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"div",class:"delivery-bloc-info",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"table",children:[{tag:"table",children:[{tag:"tbody",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<tr><td>Lundi</td><td>"+this.openingHoursByDay.Lundi+"</td></tr>"),this.openingHoursByDay.Mardi&&(horaire+="<tr><td>Mardi</td><td>"+this.openingHoursByDay.Mardi+"</td></tr>"),this.openingHoursByDay.Mercredi&&(horaire+="<tr><td>Mercredi</td><td>"+this.openingHoursByDay.Mercredi+"</td></tr>"),this.openingHoursByDay.Jeudi&&(horaire+="<tr><td>Jeudi</td><td>"+this.openingHoursByDay.Jeudi+"</td></tr>"),this.openingHoursByDay.Vendredi&&(horaire+="<tr><td>Vendredi</td><td>"+this.openingHoursByDay.Vendredi+"</td></tr>"),this.openingHoursByDay.Samedi&&(horaire+="<tr><td>Samedi</td><td>"+this.openingHoursByDay.Samedi+"</td></tr>"),this.openingHoursByDay.Dimanche&&(horaire+="<tr><td>Dimanche</td><td>"+this.openingHoursByDay.Dimanche+"</td</tr>")),horaire}}]}]}]}]}]};function addiOSMetaData(){if(0===$j("meta[name=apple-itunes-app]").length){$j("head").append("\n\x3c!-- START iOS META --\x3e<meta name='apple-itunes-app' content='app-id=401920975, affiliate-data=at=1001lnWM&ct=smart_app_banner_bcom_ios&pt=447572'>\x3c!-- END --\x3e")}}function addAndroidManifestFile(){if(0===$j("link[rel=manifest]").length){$j("head").append("\n\x3c!-- START Diving Deep Android link manifest--\x3e<link rel='manifest' href='/webapp/wcs/stores/BoulangerStg/statics/plugins/json/webapp_android_manifest.json'>\x3c!-- END --\x3e")}}$j(document).ready(function(){"true"===bl.showSmartAppBannerAndroid&&addAndroidManifestFile(),"true"===bl.showSmartAppBanneriOS&&addiOSMetaData()}),$j(document).ready(function(){$j(function(){$j("#buttonTop")&&$j(document.getElementById("buttonTop")).on("click",function(){var i=window.scrollY,sliding=0;sliding=setInterval(function(){if(!(0<(i=window.scrollY)))return clearInterval(sliding),sliding=0,!1;i-=600,window.scrollTo(0,i),0===i&&(clearInterval(sliding),sliding=0)},0)})})}),jQuery.fn.cnil=function(options){var A,settings=$j.extend({cofaxUrl:"javascript:void(0);",cookieName:"cnil",handleAllClicks:!0,display:0},options),getWidthWindow=function(){return $j(window).width()},vLayer=jQuery("#layerCookies");if(1===settings.display&&1!==(A=settings.cookieName,0<document.cookie.length&&(c_start=document.cookie.indexOf(A+"="),-1!=c_start)?(c_start=c_start+A.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):"")&&!vLayer.length){var layer;layer="<div id='layerCookies' style=\"display:none;\">",layer+="<p align='right' class='layerCookieRight'>",layer+="<a href='#' class='close'>X</a>",layer+="</p>",layer+="<p align='left' class='layerCookieLeft'>",layer+="<em>En poursuivant votre navigation,  vous acceptez l'utilisation des cookies pour disposer de contenus adapt&eacute;s &agrave; vos centres d'int&eacute;r&ecirc;t et am&eacute;liorer votre exp&eacute;rience sur le site. </em><em>Pour en savoir plus et g&eacute;rer vos param&egrave;tres, </em>",layer+="<a href='"+unsecureBaseHref+settings.cofaxUrl+"' target='_blank'>cliquez ici</a>",layer+="</p>",layer+="<div style='clear:both;'> </div>",layer+="</div>",$j("#container").before(layer);getWidthWindow()<1e3&&getWidthWindow(),$j("#layerCookies .close").bind("click",function(e){e.preventDefault(),$j("#layerCookies").animate({top:"-40px"},{duration:300,complete:function(){$j("#layerCookies").remove()}}),$j("#container, #panelLeft, #panelFacet").animate({paddingTop:"0px"},{duration:300}),$j(".black, .blackFacet").animate({marginTop:"0px"},{duration:300});var today=new Date;!function(C,G,D,H,E,A){"use strict";D instanceof Date?D=D.toGMTString():"number"==typeof D&&(D=new Date(+new Date+1e3*D).toGMTString());var I,F,B=[C+"="+escape(G)];for(F in I={expires:D,path:H,domain:E})I[F]&&B.push(F+"="+I[F]);A&&B.push("secure"),document.cookie=B.join(";")}(settings.cookieName,"1",new Date(new Date(today).setMonth(today.getMonth()+12)),"/",".boulanger.com")})}},"undefined"==typeof bl&&(bl={}),void 0===bl.form&&(bl.form={}),$j.extend(bl.form,{emailRegExp:/^[a-zA-Z0-9\+._-]+@[a-zA-Z0-9._-]{2,}\.[a-zA-Z]{2,4}$/,init:function(){$j("input.required").each(function(){if($j(this).hasClass("postalCode")&&!$j(this).parent().hasClass("postalCode")&&$j(this).parent().addClass("postalCode"),$j(this).attr("name")){var dataName=$j(this).attr("name");$j(this).parents("div").hasClass("grp-input")?$j(this).parents(".grp-input").attr("data-name",dataName):$j(this).parent().attr("data-name",dataName)}}),$j("*[data-type]").each(function(){$j(this).attr("type",$j(this).attr("data-type"))})},verifReg:function(el,reg,errorClass,validClass){""!==el.val()&&reg.test(el.val())?(el.parent().removeClass(errorClass).addClass(validClass),el.parents(".grp-input").hasClass("compare")||(el.parent().siblings().hasClass(errorClass)?el.parents(".grp-input").removeClass(validClass).addClass(errorClass):el.parents(".grp-input").removeClass(errorClass).addClass(validClass))):(el.parent().removeClass(validClass).addClass(errorClass),el.parents(".grp-input").hasClass("compare")||el.parents("div").hasClass("grp-input")&&el.parents(".grp-input").removeClass(validClass).addClass(errorClass))},formValidation:function(pOptions){var options=$j.extend({checkSubmit:!0,verifIn:!0},pOptions);bl.form.init();var requiredFields=$j(':text.required, input.required[type="email"], input.required[type="number"], input.required[type="tel"]'),requiredPassword=$j(":password.required"),requiredSelect=$j("select.required"),requiredRadio=$j(".radio.required :radio"),submitBtn=$j(".action"),password=/^.[^<\>]{7,54}$/,passwordLoginPage=/^.[^<\>]{4,54}$/,number=/^[0-9]{5}$/,tel=/^[0][1-7,9][0-9]{8}$/,textSociety=/^.{0,50}$/,textN=/^.[a-zA-ZÀ-ÖØ-öø-ÿœŒ\-'\s]{1,23}$/,textP=/^.[a-zA-ZÀ-ÖØ-öø-ÿœŒ\-'\s]{1,18}$/,textAdress=/^.{2,35}$/,text=/^.{1,34}$/,cardNumber=/^[AB]{1}[0-9]{8,9}$/,emailRegExp=/^[a-zA-Z0-9\+._-]{0,39}@{1}[a-zA-Z0-9._-]{0,27}\.[a-zA-Z]{2,4}$/,securityLevel=new Array;securityLevel[0]="",securityLevel[1]="sécurité insuffisante",securityLevel[2]="Sécurité moyenne",securityLevel[3]="Sécurité forte";submitBtn.unbind("click").bind("click",function(e){e.preventDefault(),function(btn,validClass,errorClass){requiredNearBtn=btn.parents("form").find(requiredFields.add(requiredPassword).add("#orgName, #orgUnitName").add(requiredSelect).add(requiredRadio)).add(),requiredNearBtn.each(function(){valid($j(this),errorClass,validClass)});var required=$j("form .required").length,success=$j("form label.success").length;$j("form").hasClass("invalidForm")||success<required?($j(".username-error").css("display","none"),$j("form").find(".invalidExist")&&($j(".invalidExist").addClass(errorClass).removeClass(validClass),$j(".return").css("display","block")),0<$j("form p.invalid").length&&$j("html, body").animate({scrollTop:$j("form p.invalid:first").offset().top-30},1e3),$j("form").addClass("invalidForm")):options.checkSubmit&&($j("form").removeClass("invalidForm"),btn.parents("form").submit())}($j(this),"valid","invalid")}),$j("input.required#passwordConfirm, input.required#newPasswordConfirm").unbind("focus").bind("focus",function(){$j(this).parents("div").hasClass("grp-input")&&($j(this).parents(".grp-input").hasClass("active_conf")||$j(this).parents(".grp-input").addClass("active_conf"))}),$j("input.required#passwordConfirm, input.required#newPasswordConfirm").unbind("blur").bind("blur",function(){validForm(),$j(this).parents("div").hasClass("grp-input")&&$j(this).parents(".grp-input").hasClass("active_conf")&&$j(this).parents(".grp-input").removeClass("active_conf")}),requiredFields.add($j("input#password.required, input#passwordConfirm.required, input#newPassword.required, input#newPasswordConfirm.required, select")).unbind("blur").bind("blur",function(){$j(this).parents(".grp-input").removeClass("active"),$j(this).parent().removeClass("active"),validForm()}),requiredFields.add($j("input#password.required, input#passwordConfirm.required, input#newPassword.required, input#newPasswordConfirm.required, select")).unbind("focus").bind("focus",function(){$j(this).parents("div").hasClass("grp-input")?$j(this).parents(".grp-input").hasClass("active")||$j(this).parents(".grp-input").addClass("active"):$j(this).parent().hasClass("active")||$j(this).parent().addClass("active"),"password"===$j(this).attr("id")&&$j(this).parent().hasClass("valid")&&$j(this).parents(".grp-input").removeClass("active"),"passwordConfirm"===$j(this).attr("id")&&$j(this).parent().hasClass("valid")&&($j(this).parents(".grp-input").removeClass("active"),$j(this).parents(".grp-input").removeClass("active_conf","active"))}),requiredFields.add($j("input#password.required, input#passwordConfirm.required, input#newPassword.required, input#newPasswordConfirm.required, input#logonPassword.required, #orgUnitName")).unbind("keyup input").bind("keyup",function(){valid($j(this),"invalid","valid"),validForm()}),$j('input.required[name="password"], input.required[name="newPassword"]').unbind("keyup").keyup(function(){valid($j(this),"invalid","valid"),security($j(this))}),$j("input#passwordConfirm.required").unbind("keyup").keyup(function(){$j(this).parents(".grp-input").is(".compare")&&confirmPassword("invalid","valid"),$j(this).parent().hasClass("invalid")?$j(this).parents(".grp-input").addClass("invalid_conf"):$j(this).parents(".grp-input").removeClass("invalid_conf")}),$j("input#newPasswordConfirm.required").unbind("keyup").keyup(function(){confirmNewPassword("invalid","valid"),$j(this).parent().hasClass("invalid")?$j(this).parents(".compare").addClass("invalid_conf"):$j(this).parents(".compare").removeClass("invalid_conf")}),requiredRadio.add(requiredSelect).unbind("change").bind("change",function(){valid($j(this),"invalid","valid"),validForm()}),$j("#orgName").unbind("change").change(function(){"-"===$j("#orgName option:selected").text().charAt(0)?($j("#orgName").parents("p").removeClass("valid").addClass("invalid"),$j("#orgName").removeClass("valid").addClass("invalid")):($j("#orgName").parents("p").removeClass("invalid").addClass("valid"),$j("#orgName").removeClass("invalid").addClass("valid")),validForm()}),$j("#pro").unbind("click").click(function(){"-"!==$j("#orgName option:selected").text().charAt(0)&&$j(".pro").each(function(){"typeSociety"===$j(this).attr("data-name")&&$j(this).removeClass("invalid").addClass("valid")}),validForm()}),$j("#part").unbind("click").click(function(){validForm()});var valid=function(el,errorClass,validClass){var type=el.attr("type");if("radio"===type)el.parents("p").find(":radio").is(":checked")?el.parents("p").removeClass(errorClass).addClass(validClass):el.parents("p").removeClass(validClass).addClass(errorClass);else if("email"===type)verifReg(el,emailRegExp,errorClass,validClass);else if("password"===type)"logonPassword"===el.attr("id")?verifReg(el,passwordLoginPage,errorClass,validClass):(verifReg(el,password,errorClass,validClass),"password"===el.attr("id")||"newPassword"===el.attr("id")?(el.parent().hasClass("valid")&&el.parents(".grp-input").removeClass("active"),security(el)):el.parent().hasClass("valid")&&(el.parents(".grp-input").removeClass("active_conf"),el.parents(".grp-input").removeClass("active"))),"newPasswordConfirm"===el.attr("id")&&confirmNewPassword("invalid","valid");else if("number"===type)verifReg(el,number,errorClass,validClass);else if("tel"===type)verifReg(el,tel,errorClass,validClass),bl.form.phoneNumber(el,errorClass,validClass);else if("orgUnitName"===el.attr("id"))verifReg(el,textSociety,errorClass,validClass);else if("lastName"===el.attr("id"))verifReg(el,textN,errorClass,validClass);else if("firstName"===el.attr("id"))verifReg(el,textP,errorClass,validClass);else if("address1"===el.attr("id"))verifReg(el,textAdress,errorClass,validClass);else if("postalCode"===el.attr("id"))verifReg(el,number,errorClass,validClass);else if("orgName"===el.attr("id")){"-"===$j("#orgName option:selected").text().charAt(0)?($j("#orgName").parents("p").removeClass("valid").addClass("invalid"),$j("#orgName").removeClass("valid").addClass("invalid")):($j("#orgName").parents("p").removeClass("invalid").addClass("valid"),$j("#orgName").removeClass("invalid").addClass("valid"))}else"cardNumber"===el.attr("id")?verifReg(el,cardNumber,errorClass,validClass):verifReg(el,text,errorClass,validClass)},validForm=function(){var required=$j("form .required").length,succes=$j("form p.valid").length,error=$j("form p.invalid").length,errorServer=$j(".username-error").css("display");required<=succes?$j("form").removeClass("invalidForm"):0<=required&&0===succes&&0===error||"block"==errorServer?$j("form").removeClass("invalidForm"):$j("form").addClass("invalidForm")},verifReg=function(el,reg,errorClass,validClass){return bl.form.verifReg(el,reg,errorClass,validClass)},confirmPassword=function(errorClass,validClass){$j("form input#password").val()===$j("form input#passwordConfirm").val()&&$j("form input#password").parent().hasClass(validClass)?($j("form input#passwordConfirm").parent().addClass(validClass).removeClass(errorClass),$j(".compare").addClass(validClass).removeClass(errorClass)):$j("form input#passwordConfirm").parent().addClass(errorClass).removeClass(validClass)},confirmNewPassword=function(errorClass,validClass){var password=$j("form input#newPassword").val(),confirm_password=$j("form input#newPasswordConfirm").val();password===confirm_password&&$j("form input#newPassword").parent().hasClass(validClass)?($j("form input#newPasswordConfirm").parent().addClass(validClass).removeClass(errorClass),$j(".compare").addClass(validClass).removeClass(errorClass)):$j("form input#newPasswordConfirm").parent().addClass(errorClass).removeClass(validClass),password===confirm_password?$j("form #passwordDifferent").attr("style","display: none;"):$j("form #passwordDifferent").attr("style","display: block;")};function security(el){null!==el.val()&&0===el.val().length?(el.parents("p").addClass("invalid").removeClass("valid"),$j("#passwordValidationDescription").html(securityLevel[0]),$j("#passwordValidationImage").removeClass()):null!==el.val()&&el.val().length<8||el.val().match(/\s/gi)?(el.parents("p").addClass("invalid").removeClass("valid"),$j(".compare").addClass("invalid").removeClass("valid"),$j("#passwordValidationDescription").html(securityLevel[1]).css("color","#db4453"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level1")):null!==el.val()&&8<=el.val().length&&(!el.val().match(/[a-z]/)&&!el.val().match(/[A-Z]/)||!el.val().match(/\d+/))?(el.parents("p").addClass("invalid").removeClass("valid"),$j(".compare").addClass("invalid").removeClass("valid"),$j("#passwordValidationDescription").html(securityLevel[1]).css("color","#db4453"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level1")):null!==el.val()&&8<=el.val().length&&(el.val().match(/[a-z]/)||el.val().match(/[A-Z]/))&&el.val().match(/\d+/)&&(el.val().match(/[a-z]/)&&el.val().match(/[A-Z]/)||el.val().match(/.[!,@,#,$,%,^,&,*,?,_,~,\-,+,=,{,},;,:,",|,.,(,),\[,\],§,\,,\\,\',\`]/)||el.val().match(/.[à,á,â,ã,ä,å,â,è,é,ê,ë,ê,ì,í,î,ï,ò,ó,ô,õ,ö,ù,ú,û,ü,ÿ,ý,ç,,À,Á,Â,Ã,Ä,Å,Â,È,É,Ê,Ë,Ê,Ì,Í,Î,Ï,Ò,Ó,Ô,Õ,Ö,Ù,Ú,Û,Ü,Ÿ,Ý,Ç]/)?($j("#passwordValidationDescription").html(securityLevel[3]).css("color","#3cb878"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level3")):($j("#passwordValidationDescription").html(securityLevel[2]).css("color","#fb6e52"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level2")),el.parents("p").removeClass("invalid").addClass("valid"),$j(".compare").removeClass("invalid").addClass("valid")),(el.parents(".grp-input").find("p+p").is(".valid")||el.parents(".grp-input").find("p+p").is(".invalid"))&&confirmPassword("invalid","valid")}options.verifIn&&function verifIn(){btn=$j("button"),requiredNearBtn=btn.parents("form").find(requiredFields.add(requiredPassword).add("#orgName, #orgUnitName").add(requiredSelect).add(requiredRadio)).add(),requiredNearBtn.each(function(){valid($j(this),"empty","valid")}),$j("form").hasClass("invalidForm")&&$j("form").find(".invalidExist")&&($j(".invalidExist").addClass("invalid").removeClass("valid"),$j(".return").css("display","block")),$j(".empty").each(function(){$j(this).find("input").hasClass("select")||(""===$j(this).find("input").val()?$j(this).removeClass("empty"):""===$j(this).find("select").find("option").val()?$j(this).removeClass("empty"):$j(this).find("input").is("checked")||$j(this).removeClass("empty"))}),validForm()}()},phoneNumber:function(el,errorClass,validClass){if(null!==el.val().match(/[^\d]/g)){var start=el[0].selectionStart,end=el[0].selectionEnd;el.val(el.val().replace(/[^\d]/g,"")),el[0].setSelectionRange(start-1,end-1)}el.parent().removeClass("sequential").removeClass("serial");var phoneNumber=el.val(),serieArray=new Array("00000000","11111111","22222222","33333333","44444444","55555555","66666666","77777777","88888888","99999999"),sequentialArray=new Array("01234567","12345678","23456789","34567890","09876543","98765432","87654321","76543210"),isWrong=!1,messageClass="";for(i=0;i<sequentialArray.length;i++)-1<phoneNumber.indexOf(sequentialArray[i].substr(0,8))&&(isWrong=!0,messageClass="sequential",console.log(phoneNumber.indexOf(sequentialArray[i].substr(0,8))));if(!isWrong)for(i=0;i<serieArray.length;i++)-1<phoneNumber.indexOf(serieArray[i].substr(0,8))&&(isWrong=!0,messageClass="serial");isWrong?el.parent().addClass(messageClass).removeClass(validClass).addClass(errorClass):el.parent().removeClass(messageClass)}}),$j(document).ready(function(){0===$j("form#Redevance").length&&bl.form.formValidation()})}catch(e){};
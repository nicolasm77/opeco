try{!function(a){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate.min"],a):a(jQuery)}(function(a){!function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-“”’]*/g,"")}a.validator.addMethod("maxWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<=d},a.validator.format("Please enter {0} words or less.")),a.validator.addMethod("minWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},a.validator.format("Please enter at least {0} words.")),a.validator.addMethod("rangeWords",function(a,c,d){var e=b(a),f=/\b\w+\b/g;return this.optional(c)||e.match(f).length>=d[0]&&e.match(f).length<=d[1]},a.validator.format("Please enter between {0} and {1} words."))}(),a.validator.addMethod("accept",function(b,c,d){var e,g="string"==typeof d?d.replace(/\s/g,"").replace(/,/g,"|"):"image/*",h=this.optional(c);if(h)return h;if("file"===a(c).attr("type")&&(g=g.replace(/\*/g,".*"),c.files&&c.files.length))for(e=0;e<c.files.length;e++)if(!c.files[e].type.match(new RegExp(".?("+g+")$","i")))return!1;return!0},a.validator.format("Please enter a value with a valid mimetype.")),a.validator.addMethod("alphanumeric",function(a,b){return this.optional(b)||/^\w+$/i.test(a)},"Letters, numbers, and underscores only please"),a.validator.addMethod("bankaccountNL",function(a,b){if(this.optional(b))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(a))return!1;var c,f=a.replace(/ /g,""),g=0,h=f.length;for(c=0;c<h;c++)g+=(h-c)*f.substring(c,c+1);return g%11==0},"Please specify a valid bank account number"),a.validator.addMethod("bankorgiroaccountNL",function(b,c){return this.optional(c)||a.validator.methods.bankaccountNL.call(this,b,c)||a.validator.methods.giroaccountNL.call(this,b,c)},"Please specify a valid bank or giro account number"),a.validator.addMethod("bic",function(a,b){return this.optional(b)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(a)},"Please specify a valid BIC code"),a.validator.addMethod("cifES",function(a){"use strict";var b,c,d,e,f,g,h=[];if(!(a=a.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(d=0;d<9;d++)h[d]=parseInt(a.charAt(d),10);for(c=h[2]+h[4]+h[6],e=1;e<8;e+=2)g=(f=(2*h[e]).toString()).charAt(1),c+=parseInt(f.charAt(0),10)+(""===g?0:parseInt(g,10));return!!/^[ABCDEFGHJNPQRSUVW]{1}/.test(a)&&(c+="",a+=b=10-parseInt(c.charAt(c.length-1),10),h[8].toString()===String.fromCharCode(64+b)||h[8].toString()===a.charAt(a.length-1))},"Please specify a valid CIF number."),a.validator.addMethod("creditcardtypes",function(a,b,c){if(/[^0-9\-]+/.test(a))return!1;a=a.replace(/\D/g,"");var d=0;return c.mastercard&&(d|=1),c.visa&&(d|=2),c.amex&&(d|=4),c.dinersclub&&(d|=8),c.enroute&&(d|=16),c.discover&&(d|=32),c.jcb&&(d|=64),c.unknown&&(d|=128),c.all&&(d=255),1&d&&/^(5[12345])/.test(a)?16===a.length:2&d&&/^(4)/.test(a)?16===a.length:4&d&&/^(3[47])/.test(a)?15===a.length:8&d&&/^(3(0[012345]|[68]))/.test(a)?14===a.length:16&d&&/^(2(014|149))/.test(a)?15===a.length:32&d&&/^(6011)/.test(a)?16===a.length:64&d&&/^(3)/.test(a)?16===a.length:64&d&&/^(2131|1800)/.test(a)?15===a.length:!!(128&d)},"Please enter a valid credit card number."),a.validator.addMethod("currency",function(a,b,c){var d,e="string"==typeof c,f=e?c:c[0],g=!!e||c[1];return f=f.replace(/,/g,""),d="^["+(f=g?f+"]":f+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",d=new RegExp(d),this.optional(b)||d.test(a)},"Please specify a valid currency"),a.validator.addMethod("dateFA",function(a,b){return this.optional(b)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(a)},"Please enter a correct date"),a.validator.addMethod("dateITA",function(a,b){var c,d,e,f,g,h=!1;return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(a)?(c=a.split("/"),d=parseInt(c[0],10),e=parseInt(c[1],10),f=parseInt(c[2],10),h=(g=new Date(f,e-1,d,12,0,0,0)).getUTCFullYear()===f&&g.getUTCMonth()===e-1&&g.getUTCDate()===d):h=!1,this.optional(b)||h},"Please enter a correct date"),a.validator.addMethod("dateNL",function(a,b){return this.optional(b)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(a)},"Please enter a correct date"),a.validator.addMethod("extension",function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},a.validator.format("Please enter a value with a valid extension.")),a.validator.addMethod("giroaccountNL",function(a,b){return this.optional(b)||/^[0-9]{1,7}$/.test(a)},"Please specify a valid giro account number"),a.validator.addMethod("iban",function(a,b){if(this.optional(b))return!0;var d,e,g,j,k,l=a.replace(/ /g,"").toUpperCase(),m="",n=!0,o="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(l))return!1;if(void 0!==(g={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[l.substring(0,2)])&&!new RegExp("^[A-Z]{2}\\d{2}"+g+"$","").test(l))return!1;for(d=l.substring(4,l.length)+l.substring(0,4),j=0;j<d.length;j++)"0"!==(e=d.charAt(j))&&(n=!1),n||(m+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e));for(k=0;k<m.length;k++)o=(""+o+m.charAt(k))%97;return 1===o},"Please specify a valid IBAN"),a.validator.addMethod("integer",function(a,b){return this.optional(b)||/^-?\d+$/.test(a)},"A positive or negative non-decimal number please"),a.validator.addMethod("ipv4",function(a,b){return this.optional(b)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(a)},"Please enter a valid IP v4 address."),a.validator.addMethod("ipv6",function(a,b){return this.optional(b)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(a)},"Please enter a valid IP v6 address."),a.validator.addMethod("lettersonly",function(a,b){return this.optional(b)||/^[a-z]+$/i.test(a)},"Letters only please"),a.validator.addMethod("letterswithbasicpunc",function(a,b){return this.optional(b)||/^[a-z\-.,()'"\s]+$/i.test(a)},"Letters or punctuation only please"),a.validator.addMethod("mobileNL",function(a,b){return this.optional(b)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(a)},"Please specify a valid mobile number"),a.validator.addMethod("mobileUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||9<a.length&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),a.validator.addMethod("nieES",function(a){"use strict";return!!(a=a.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[T]{1}/.test(a)?a[8]===/^[T]{1}[A-Z0-9]{8}$/.test(a):!!/^[XYZ]{1}/.test(a)&&a[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23))},"Please specify a valid NIE number."),a.validator.addMethod("nifES",function(a){"use strict";return!!(a=a.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(a)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.substring(8,0)%23)===a.charAt(8):!!/^[KLM]{1}/.test(a)&&a[8]===String.fromCharCode(64))},"Please specify a valid NIF number."),a.validator.addMethod("nowhitespace",function(a,b){return this.optional(b)||/^\S+$/i.test(a)},"No white space please"),a.validator.addMethod("pattern",function(a,b,c){return!!this.optional(b)||("string"==typeof c&&(c=new RegExp("^(?:"+c+")$")),c.test(a))},"Invalid format."),a.validator.addMethod("phoneNL",function(a,b){return this.optional(b)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(a)},"Please specify a valid phone number."),a.validator.addMethod("phoneUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||9<a.length&&a.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),a.validator.addMethod("phoneUS",function(a,b){return a=a.replace(/\s+/g,""),this.optional(b)||9<a.length&&a.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),a.validator.addMethod("phonesUK",function(a,b){return a=a.replace(/\(|\)|\s+|-/g,""),this.optional(b)||9<a.length&&a.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),a.validator.addMethod("postalCodeCA",function(a,b){return this.optional(b)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeBR",function(a,b){return this.optional(b)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(a)},"Informe um CEP válido."),a.validator.addMethod("postalcodeIT",function(a,b){return this.optional(b)||/^\d{5}$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeNL",function(a,b){return this.optional(b)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(a)},"Please specify a valid postal code"),a.validator.addMethod("postcodeUK",function(a,b){return this.optional(b)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(a)},"Please specify a valid UK postcode"),a.validator.addMethod("require_from_group",function(b,c,d){var e=a(d[1],c.form),f=e.eq(0),g=f.data("valid_req_grp")?f.data("valid_req_grp"):a.extend({},this),h=e.filter(function(){return g.elementValue(this)}).length>=d[0];return f.data("valid_req_grp",g),a(c).data("being_validated")||(e.data("being_validated",!0),e.each(function(){g.element(this)}),e.data("being_validated",!1)),h},a.validator.format("Please fill at least {0} of these fields.")),a.validator.addMethod("skip_or_fill_minimum",function(b,c,d){var e=a(d[1],c.form),f=e.eq(0),g=f.data("valid_skip")?f.data("valid_skip"):a.extend({},this),h=e.filter(function(){return g.elementValue(this)}).length,i=0===h||h>=d[0];return f.data("valid_skip",g),a(c).data("being_validated")||(e.data("being_validated",!0),e.each(function(){g.element(this)}),e.data("being_validated",!1)),i},a.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",function(a,b,c){var d,e=void 0===c,f=!e&&void 0!==c.caseSensitive&&c.caseSensitive,g=!e&&void 0!==c.includeTerritories&&c.includeTerritories,h=!e&&void 0!==c.includeMilitary&&c.includeMilitary;return d=g||h?g&&h?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":g?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",d=f?new RegExp(d):new RegExp(d,"i"),this.optional(b)||d.test(a)},"Please specify a valid state"),a.validator.addMethod("strippedminlength",function(b,c,d){return a(b).text().length>=d},a.validator.format("Please enter at least {0} characters")),a.validator.addMethod("time",function(a,b){return this.optional(b)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(a)},"Please enter a valid time, between 00:00 and 23:59"),a.validator.addMethod("time12h",function(a,b){return this.optional(b)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(a)},"Please enter a valid time in 12-hour am/pm format"),a.validator.addMethod("url2",function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},a.validator.messages.url),a.validator.addMethod("vinUS",function(a){if(17!==a.length)return!1;var b,c,d,e,f,g,h=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],i=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],j=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],k=0;for(b=0;b<17;b++){if(e=j[b],d=a.slice(b,b+1),8===b&&(g=d),isNaN(d)){for(c=0;c<h.length;c++)if(d.toUpperCase()===h[c]){d=i[c],d*=e,isNaN(g)&&8===c&&(g=h[c]);break}}else d*=e;k+=d}return 10===(f=k%11)&&(f="X"),f===g},"The specified vehicle identification number (VIN) is invalid."),a.validator.addMethod("zipcodeUS",function(a,b){return this.optional(b)||/^\d{5}(-\d{4})?$/.test(a)},"The specified US ZIP Code is invalid"),a.validator.addMethod("ziprange",function(a,b){return this.optional(b)||/^90[2-5]\d\{2\}-\d{4}$/.test(a)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx")});var validatorRules={nameAddress:{required:!0,maxlength:100,pattern:/[a-zA-Z\-'\s0-9àáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/},lastName:{required:!0,rangelength:[2,25],pattern:/[a-zA-Z\-'\sàáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/},firstName:{required:!0,rangelength:[2,20],pattern:/[a-zA-Z\-'\sàáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/},address1:{required:!0,rangelength:[2,38],pattern:/[a-zA-Z\-'\s0-9àáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/},addressMore:{rangelength:[2,38],pattern:/[a-zA-Z\-'\s0-9àáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/},digicode:{maxlength:60,pattern:/[a-zA-Z\-'\s0-9àáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/},city:{required:!0},voucherCode:{required:!0,rangelength:[19,19],pattern:/^[kK0-9]*$/},zipCode:{required:!0,digits:!0,rangelength:[5,5],pattern:/^[0-9]/},postalCode:{required:!0,digits:!0,rangelength:[5,5],pattern:/^[0-9]/},phone1:{required:!0,digits:!0,rangelength:[10,10],firstNumber:!0,sequentialArray:!0,serieArray:!0,pattern:/^[0-9]/},phone2:{digits:!0,rangelength:[10,10],sequentialArray:!0,serieArray:!0,pattern:/^[0-9]/},phoneMobile:{required:!0,digits:!0,rangelength:[10,10],sequentialArray:!0,serieArray:!0,mobileFormat:!0,pattern:/^[0-9]/},phoneMobile2:{digits:!0,rangelength:[10,10],sequentialArray:!0,serieArray:!0,mobileFormat:!0,pattern:/^[0-9]/},phoneMobileFix:{digits:!0,rangelength:[10,10],sequentialArray:!0,serieArray:!0,mobileFixFormat:!0,pattern:/^[0-9]/},cardNumber:{required:!0,rangelength:[9,10]},logonId:{required:!0,lengthemail:!0,rangelength:[6,70],email:!0,emailFormat:!0,pattern:/[@a-zA-Z0-9._-]/},email:{required:!0,lengthemail:!1,rangelength:[6,70],email:!0,emailFormat:!0,pattern:/[@a-z0-9._-]/},emailConfirm:{required:!0,equalTo:"#email"},logonPassword:{required:!0,rangelength:[5,55],pattern:/^[^<\>]/},password:{required:!0,security:!0,rangelength:[8,55],pattern:/^[^<\>]/},passwordConfirm:{required:!0,equalTo:"#password"},birthDay:{require_from_group:[3,".validateBirth"]},orgName:{required:!0},orgUnitName:{required:!0,rangelength:[2,50],pattern:/[a-zA-Z\-'\s0-9àáâãäåæçèéêëìíîïñòóôõöœùúûüýÿÂÄÀÊËÉÈÇ]/}};function replaceAccentedCharactersBlur(element){var value=element.val();value=(value=(value=(value=(value=(value=(value=(value=(value=(value=(value=(value=(value=(value=value.replace(new RegExp(/[àáâãäå]/g),"a")).replace(new RegExp(/æ/g),"ae")).replace(new RegExp(/ç/g),"c")).replace(new RegExp(/[èéêë]/g),"e")).replace(new RegExp(/[ìíîï]/g),"i")).replace(new RegExp(/ñ/g),"n")).replace(new RegExp(/[òóôõö]/g),"o")).replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/[ùúûü]/g),"u")).replace(new RegExp(/[ýÿ]/g),"y")).replace(new RegExp(/[ÂÄÀ]/g),"A")).replace(new RegExp(/[ÊËÉÈ]/g),"E")).replace(new RegExp(/Ç/g),"C")).toUpperCase(),element.val(value)}function activeSubmit(form){for(var inputError=$j("#"+form+" :not(label):not(span).error").add($j("#"+form+" :not(label):not(span).grp-error")).length,inputRequired=$j("#"+form+" :not(label):not(span).required").length,inputRequiredVal=$j("#"+form+" :not(label):not(span):not(p):not(select).required").add($j("#"+form+" .select.required option:selected")),c=0,i=0;i<inputRequiredVal.length;i++){""!=inputRequiredVal[i].value&&c++}0===inputError&&inputRequired<=c?$j("#"+form+" .action").removeClass("off"):$j("#"+form+" .action").addClass("off")}function grpSpecific(element,errorClass,validClass){$j(element).parents("div").hasClass("birthday")?"false"===$j(element).attr("aria-invalid")?$j(element).parents("div.birthday").addClass("grp-success").removeClass("grp-error"):$j(element).parents("div.birthday").addClass("grp-error").removeClass("grp-success"):$j(element).parent("p").hasClass("radio")&&($j(element).hasClass("success")?$j(element).parent().addClass(validClass).removeClass(errorClass):$j(element).parent().addClass(errorClass).removeClass(validClass))}if(jQuery.validator.setDefaults({ignore:":hidden, #UserData, #ShopCartForm, #accountRegistrationForm, #myAddressForm, #passwordForm, #depositForm, #CityData, #mobileAccountRegistrationForm,.ignoreCarglass",debug:!1,focusInvalid:!0,validClass:"success",success:"success",errorClass:"error",onfocusout:function(element,errorClass,validClass){$j(element).valid()},onkeyup:function(element,errorClass,validClass){$j(element).valid(),activeSubmit($j(element).parents("form").attr("id"))},highlight:function(element,errorClass,validClass){$j(element).addClass(errorClass).removeClass(validClass),grpSpecific(element,errorClass,validClass)},unhighlight:function(element,errorClass,validClass){$j(element).addClass(validClass).removeClass(errorClass),grpSpecific(element,errorClass,validClass)},rules:{civility:{required:!0}},messages:{civility:{required:"Sélectionnez votre civilit&eacute;"},nameAddress:{required:"Ce champ est obligatoire",maxlength:"",pattern:""},lastName:{required:"Indiquez votre nom",rangelength:"Indiquez votre nom",pattern:"Indiquez votre nom"},firstName:{required:"Indiquez votre pr&eacute;nom",rangelength:"Indiquez votre pr&eacute;nom",pattern:"Indiquez votre pr&eacute;nom"},address1:{required:"Indiquer votre adresse",rangelength:"Adresse invalide",pattern:"Adresse invalide"},addressMore:{rangelength:"Adresse invalide",pattern:"Adresse invalide"},digicode:{maxlength:"Indiquez votre digicode",pattern:"Indiquez votre digicode"},city:{required:"Indiquez votre ville"},voucherCode:{required:"Indiquez votre code personnel",rangelength:"code personnel invalide",pattern:"Code personnel invalide"},postalCode:{required:"Indiquez votre code postal",digits:"Code postal inexistant",rangelength:"Code postal inexistant",pattern:"Code postal inexistant"},phone1:{required:"Indiquer un num&eacute;ro de t&eacute;l&eacute;phone",digits:"",rangelength:"Indiquer un num&eacute;ro de t&eacute;l&eacute;phone",firstNumber:"",sequentialArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir des chiffres s&eacute;quentiels",serieArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir de s&eacute;rie de chiffres identiques",pattern:"Indiquer un num&eacute;ro de t&eacute;l&eacute;phone"},phone2:{digits:"",rangelength:"Indiquer un num&eacute;ro de t&eacute;l&eacute;phone",sequentialArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir des chiffres s&eacute;quentiels",serieArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir de s&eacute;rie de chiffres identiques",pattern:"Indiquer un num&eacute;ro de t&eacute;l&eacute;phone"},phoneMobile:{required:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable",digits:"",rangelength:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable",sequentialArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir des chiffres s&eacute;quentiels",serieArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir de s&eacute;rie de chiffres identiques",mobileFormat:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable",pattern:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable"},phoneMobile2:{required:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable",digits:"",rangelength:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable",sequentialArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir des chiffres s&eacute;quentiels",serieArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir de s&eacute;rie de chiffres identiques",mobileFormat:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable",pattern:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable"},phoneMobileFix:{required:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone",digits:"",rangelength:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone",sequentialArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir des chiffres s&eacute;quentiels",serieArray:"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir de s&eacute;rie de chiffres identiques",mobileFixFormat:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone",pattern:"Indiquer votre num&eacute;ro de t&eacute;l&eacute;phone"},cardNumber:{required:"Indiquer votre num&eacute;ro de carte valide",rangelength:"Indiquer votre num&eacute;ro de carte valide"},logonId:{required:"Indiquez votre email",lengthemail:"Email invalide",rangelength:"Email invalide",email:"Email invalide",emailFormat:"Email invalide",pattern:"Email invalide"},email:{required:"Indiquez votre email",lengthemail:"Email invalide",rangelength:"Email invalide",email:"Email invalide",pattern:"Email invalide",emailFormat:"Email invalide"},emailConfirm:{required:"Indiquez votre email",lengthemail:"",rangelength:"",email:"",pattern:"",equalTo:"Email diff&eacute;rent"},logonPassword:{required:"Indiquez votre mot de passe",rangelength:"S'il vous pla&icirc;t entrer une valeur comprise entre 5 et 54 caract&egrave;res de long",pattern:"Le mot de passe n'est pas valide"},password:{required:"Indiquez votre mot de passe",security:"Mot de passe invalide",rangelength:"S'il vous pla&icirc;t entrer une valeur comprise entre 5 et 54 caract&egrave;res de long",pattern:"Le mot de passe n'est pas valide"},passwordConfirm:{required:"Indiquez votre mot de passe",equalTo:"Mot de passe diff&eacute;rent"},day:{require_from_group:"S'il vous pla&icirc;t, veuillez remplir les 3 champs"},month:{require_from_group:"S'il vous pla&icirc;t, veuillez remplir les 3 champs"},year:{require_from_group:"S'il vous pla&icirc;t, veuillez remplir les 3 champs"},orgName:{required:"Ce champ est obligatoire"},orgUnitName:{required:"Ce champ est obligatoire",rangelength:"S'il vous pla&icirc;t entrer une valeur comprise entre 0 et 50 caract&egrave;res de long",pattern:""}},errorPlacement:function(error,element){"day"===element.attr("id")||"month"===element.attr("id")||"year"===element.attr("id")?(error.appendTo(element.parents(".birthday")),element.parents(".birthday").removeClass("grp-success").addClass("grp-error")):error.appendTo(element.parent())}}),jQuery.validator.addMethod("sequentialArray",function(value,element){var sequentialArray=new Array("01234567","12345678","23456789","34567890","09876543","98765432","87654321","76543210"),isWrong=!1;for(i=0;i<sequentialArray.length;i++)-1<value.indexOf(sequentialArray[i].substr(0,8))&&(isWrong=!0);return this.optional(element)||!isWrong},"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir des chiffres s&eacute;quentiels"),jQuery.validator.addMethod("serieArray",function(value,element){var serieArray=new Array("00000000","11111111","22222222","33333333","44444444","55555555","66666666","77777777","88888888","99999999"),isWrong=!1;for(i=0;i<serieArray.length;i++)-1<value.indexOf(serieArray[i].substr(0,8))&&(isWrong=!0);return this.optional(element)||!isWrong},"Les num&eacute;ros de t&eacute;l&eacute;phone ne doivent pas avoir de s&eacute;rie de chiffres identiques"),jQuery.validator.addMethod("firstNumber",function(value,element){return"0"==value.substring(0,1)&&"8"!==value.substring(1,2)&&"0"!==value.substring(1,2)||(isFormValidated=!1)},"Merci d'indiquer un num&eacute;ro de t&eacute;l&eacute;phone valide au format : 0601020304"),jQuery.validator.addMethod("mobileFormat",function(value,element){return""==value||"0"==value.substring(0,1)&&("6"===value.substring(1,2)||"7"===value.substring(1,2))},"Merci d'indiquer un num&eacute;ro de t&eacute;l&eacute;phone valide au format : 0601020304"),jQuery.validator.addMethod("mobileFixFormat",function(value,element){return/^(01|02|03|04|05|06|07|09)[0-9]{8}$/.test(value)},"Merci d'indiquer un num&eacute;ro de t&eacute;l&eacute;phone valide au format : 0601020304"),jQuery.validator.addMethod("lengthemail",function(value,element){return this.optional(element)||value.indexOf("@")<=40&&value.length-value.indexOf("@")<=29},"Message trop long"),jQuery.validator.addMethod("emailFormat",function(value,element){return/^[a-zA-Z0-9\+._-]{1,64}@{1}[a-zA-Z0-9._-]{1,64}\.[a-zA-Z]{2,64}$/.test(value)},"Email invalide"),jQuery.validator.addMethod("security",function(value,element){var securityLevel=new Array;securityLevel[0]="",securityLevel[1]="s&eacute;curit&eacute; insuffisante",securityLevel[2]="S&eacute;curit&eacute; moyenne",securityLevel[3]="S&eacute;curit&eacute; forte";return null!=value&&0==value.length?($j("#passwordValidationDescription").html(securityLevel[0]),$j("#passwordValidationImage").removeClass(),!1):null!=value&&value.length<8||value.match(/\s/gi)?($j(".compare").addClass("error").removeClass("success"),$j("#passwordValidationDescription").html(securityLevel[1]).css("color","#db4453"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level1"),!1):null!=value&&8<=value.length&&(!value.match(/[a-z]/)&&!value.match(/[A-Z]/)||!value.match(/\d+/))?($j(".compare").addClass("error").removeClass("success"),$j("#passwordValidationDescription").html(securityLevel[1]).css("color","#db4453"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level1"),!1):null!=value&&8<=value.length&&(value.match(/[a-z]/)||value.match(/[A-Z]/))&&value.match(/\d+/)?(value.match(/[a-z]/)&&value.match(/[A-Z]/)||value.match(/.[!,@,#,$,%,^,&,*,?,_,~,\-,+,=,{,},;,:,",|,.,(,),\[,\],§,\,,\\,\',\`]/)||value.match(/.[à,á,â,ã,ä,å,â,è,é,ê,ë,ê,ì,í,î,ï,ò,ó,ô,õ,ö,ù,ú,û,ü,ÿ,ý,ç,,À,Á,Â,Ã,Ä,Å,Â,È,É,Ê,Ë,Ê,Ì,Í,Î,Ï,Ò,Ó,Ô,Õ,Ö,Ù,Ú,Û,Ü,Ÿ,Ý,Ç]/)?($j("#passwordValidationDescription").html(securityLevel[3]).css("color","#3cb878"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level3")):($j("#passwordValidationDescription").html(securityLevel[2]).css("color","#fb6e52"),$j("#passwordValidationImage").removeClass(),$j("#passwordValidationImage").addClass("level2")),$j(".compare").removeClass("error").addClass("success"),!0):void 0},""),jQuery.validator.addClassRules(validatorRules),$j(document).ready(function(){var elements=$j("form:not('#UserData'):not('#depositForm'):not('#ShopCartForm'):not('#accountRegistrationForm'):not('#myAddressForm'):not('#passwordForm'):not('#mobileAccountRegistrationForm') input[type!='submit'], form:not('#UserData'):not('#depositForm'):not('#ShopCartForm'):not('#accountRegistrationForm'):not('#myAddressForm'):not('#passwordForm'):not('#mobileAccountRegistrationForm') textarea, form:not('#UserData'):not('#depositForm'):not('#ShopCartForm'):not('#accountRegistrationForm'):not('#myAddressForm'):not('#passwordForm'):not('#mobileAccountRegistrationForm') select");elements.focus(function(){$j(this).parents("p").addClass("active")}),elements.blur(function(){$j("input[name*='search']")||"email"==$j(this).attr("type")||"password"==$j(this).attr("type")||"checkbox"==$j(this).attr("type")||$j(this).hasClass("select")||$j(this).hasClass("noUppercase")||replaceAccentedCharactersBlur($j(this)),$j(this).parents("p").removeClass("active"),setTimeout(function(){activeSubmit($j(this).parents("form").attr("id"))},100)}),elements.on("change",function(){$j(this).valid(),activeSubmit($j(this).parents("form").attr("id"))}),elements.keypress(function(e){var nameEl=this.name;if(void 0!==validatorRules[nameEl]){var pattern=validatorRules[nameEl].pattern;if(null!=pattern){for(var x=e.which||e.keyCode,y=String.fromCharCode(x),keyCodeBasic=[8,9,13,16,17,18,20,27,37,39,144],resultKeyCodeBasic=!1,i=0;i<keyCodeBasic.length;i++)e.keyCode===keyCodeBasic[i]&&0!=e.keyCode&&(resultKeyCodeBasic=!0);if(null==y.match(pattern)&&!1===resultKeyCodeBasic)return!1}13==e.keyCode&&$j("this").parents("form").submit()}})}),function($){var blockedElement=null,blockoutTimer=null,methods={init:function(options){jLog("common.clickBlocker: init options",options),$(this).bind("click.clickBlocker",methods.checkblock)},checkblock:function(evt){return jLog("common.clickBlocker: checkblock"),blockedElement==evt.target?(jLog("common.clickBlocker: blocking"),evt.stopPropagation(),!1):(jLog("common.clickBlocker: storing blockedElement"),blockedElement=evt.target,null!=blockoutTimer&&(clearTimeout(blockoutTimer),blockoutTimer=null),blockoutTimer=setTimeout(methods.resetBlocker,8e3),!0)},resetBlocker:function(){jLog("common.clickBlocker: resetBlocker"),blockedElement=blockoutTimer=null}};$.fn.clickBlocker=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.clickBlocker"):methods.init.apply(this,arguments)}}(jQuery),void 0===$j)var $j=jQuery.noConflict();"undefined"==typeof offerDataAlreadyLoaded&&(offerDataAlreadyLoaded={});var storesInformations=null,hasWoosmapCall=!1,path="/webapp/wcs/stores/servlet/";"undefined"!=typeof basePath&&(path=basePath),void 0!==bl.basePath&&(path=bl.basePath);var removeProductBloc=function(offerCatentryId){var pageKey=$j(".dynamic-product-data-"+offerCatentryId).attr("data-page-key");($j.isBlank(pageKey)||"hp"!=pageKey)&&$j(".dynamic-product-data-"+offerCatentryId).remove()},removeRecoBloc=function(refId){$j('div[data-eb-ref-id="'+refId+'"]').each(function(){$j(this).hide(),$j(this).parents(".owl-item").remove(),$j(".recoPersowl").each(function(){$j(this).data("owlCarousel").reinit({navigation:!0,navigationText:["",""],rewindNav:!1,pagination:!1,autoPlay:!1,slideSpeed:700,responsive:!1,items:4,loop:!1,slideBy:4}),0!==$j(this).find(".owl-item").length&&0!==$j(this).find(".product").length||$j(this).parent().addClass("off")}),$j(".earlyBirdsReco").each(function(){0===$j(this).find(".swiper-slide:visible").length&&$j(this).addClass("off")})})},isGoogleShoppingLIAContext=!1,googleShoppingLIAStoreCode,url=window.location,regexMobile=/^https:\/\/m.*/,isMobile=regexMobile.test(url.href),regexProductPage=/^\/ref\/*/,isProductPage=regexProductPage.test(url.pathname);isProductPage&&(isGoogleShoppingLIAContext=bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext(),isGoogleShoppingLIAContext&&(googleShoppingLIAStoreCode=bl.catalog.productPage.googleShoppingContextualization.getGoogleShoppingStoreCodeInUrl()));var dynamizeOffer=function(offerCatentryId,isRecette,activateStockContextualization,partnumber,hideUnavailableProduct){var dynamizeId,logger=new DynamicOfferLogData;dynamizeId=null==offerCatentryId&&void 0!==partnumber?partnumber:offerCatentryId,logger.add("["+dynamizeId+"| Lancement de la dynamisation du bloc offre]");var isCache=!isRecette;if(void 0===offerDataAlreadyLoaded[dynamizeId]||isRecette){var url=path+"BLGetDynamicOffer";$j.ajax({url:url,data:{leadOfferCatentryId:offerCatentryId,partnumber:partnumber,storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId},cache:isCache,async:!0,dataType:"json",success:function(data,textStatus,jqXHR){"object"==typeof data&&null!==data&&$j.isNumeric(dynamizeId)?(isRecette||(offerDataAlreadyLoaded[dynamizeId]=data),dynamizeOfferDOM(dynamizeId,data,logger,isRecette,activateStockContextualization,hideUnavailableProduct)):logger.add("["+dynamizeId+"| Appel Ajax]","ERROR - Erreur lors du retour du call Ajax")},error:function(jqXHR,textStatus,errorThrown){logger.add("["+dynamizeId+"| Appel Ajax]","ERROR - "+errorThrown)},complete:function(jqXHR,textStatus){$j(".dynamic-offer-data-"+dynamizeId).removeClass("off"),$j(".dynamic-offer-loader-"+dynamizeId).remove(),logger.log()}})}else dynamizeOfferDOM(dynamizeId,offerDataAlreadyLoaded[dynamizeId],logger,!1,activateStockContextualization,hideUnavailableProduct),$j(".dynamic-offer-data-"+dynamizeId).removeClass("off"),$j(".dynamic-offer-loader-"+dynamizeId).remove(),logger.log()},dynamizeSellerInformations=function(offerCatentryId,productToDynamize,logger,isRecette){var hostName=window.location.host;hostName=-1<hostName.indexOf(".")?hostName.substring(hostName.indexOf(".",hostName.indexOf("."))):hostName;var isCache=!isRecette;$j.ajax({url:"https://vente"+hostName+"/webapp/wcs/stores/servlet/seller/informations",data:{catentryId:offerCatentryId,typeMagOuCom:bl.cookie.getTypeFromVenteCookie(),sessionId:bl.cookie.getIdSessionFromVenteCookie()},cache:isCache,async:!0,type:"post",dataType:"json",success:function(data,textStatus,jqXHR){dynamizeInformationsForSellerDOM(offerCatentryId,data.sellerJson.infosvendeur,data.sellerJson.gammeProduit,logger),dynamizeWithdrawalStoresForSellerDOM(offerCatentryId,productToDynamize,data.sellerJson.storeQuantity,logger),dynamizeAvailabilityForSellerDOM(offerCatentryId,data.sellerJson.warehouseQuantity,logger),dynamizePurchaseButtonForSellerDOM(offerCatentryId,data.sellerJson.codeProduct,data.sellerJson.bundleProductQuantity,logger)},error:function(jqXHR,textStatus,errorThrown){logger.add("["+offerCatentryId+"| callSellerInformation]","ERROR: "+errorThrown)},complete:function(jqXHR,textStatus){}})},dynamizeOfferDOM=function(offerCatentryId,productToDynamize,logger,isRecette,activateStockContextualization,hideUnavailableProduct){if(!productToDynamize.published)return removeProductBloc(offerCatentryId),void removeRecoBloc(offerCatentryId);if(dynamizePriceDOM(offerCatentryId,productToDynamize,logger),dynamizeTaxesDOM(offerCatentryId,productToDynamize,logger),dynamizeDeliveryDOM(offerCatentryId,productToDynamize,logger,isRecette),dynamizePurchaseButtonDOM(offerCatentryId,productToDynamize,logger),isMobile&&dynamizeWithdrawalStores(offerCatentryId,productToDynamize,logger),activateStockContextualization&&!$j.isEmptyObject(productToDynamize.storeAvailabilities)&&isPickUpButtonDisplay(offerCatentryId,productToDynamize,logger)&&productToDynamize.offer.boulangerOffer?dynamizeWithdrawalStores(offerCatentryId,productToDynamize,logger):dynamizePickUpButtonDOM(offerCatentryId,productToDynamize,logger),dynamizeConsultAvailabilityDOM(offerCatentryId,productToDynamize,logger),dynamizeAvailabilityLabelDOM(offerCatentryId,productToDynamize,logger),dynamizeAvailabilityDOM(offerCatentryId,productToDynamize,logger,isRecette),dynamizeDeliveryFeesDOM(offerCatentryId,productToDynamize,logger),dynamizeAlertDispoDOM(offerCatentryId,productToDynamize,logger),dynamizeSimilarProductDOM(offerCatentryId,productToDynamize,logger),dynamizefinancingDOM(offerCatentryId,productToDynamize,logger),dynamizeUnitQuantityPriceDOM(offerCatentryId,productToDynamize,logger),dynamizeMerchantOfferDOM(offerCatentryId,productToDynamize,logger),dynamizeFlapAvailabilityDOM(offerCatentryId,productToDynamize,logger),dynamizeLabelsAndVisualDOM(offerCatentryId,productToDynamize,logger),dynamizeRatingsDOM(offerCatentryId,productToDynamize,logger),dynamizeAddCartProductDOM(offerCatentryId,productToDynamize,logger),dynamizeWebCategoriesDOM(offerCatentryId,productToDynamize,logger),bl.cookie.isVenteCookieExist()){var stockMobile=$j(".seller-mobile-"+offerCatentryId),comparatorSeller=$j(".seller-comparator");void 0!==stockMobile&&stockMobile.addClass("visible"),void 0!==comparatorSeller&&comparatorSeller.addClass("visible"),dynamizeSellerInformations(offerCatentryId,productToDynamize,logger,isRecette)}hideUnavailableProduct&&hideUnavailableProductFct(offerCatentryId,productToDynamize,logger)},hideUnavailableProductFct=function(offerCatentryId,productToDynamize,logger){var buyButton=$j(".dynamic-onlinePurchase-"+offerCatentryId),content=buyButton.parent();buyButton.hasClass("off")&&content.parent().removeClass("on").addClass("off")},getDeliveryDelay=function(productToDynamize){var paramArr=new Array,deliveryDelay=productToDynamize.shipping.deliveryDelay;if(void 0===deliveryDelay||"undefined"==deliveryDelay||0===deliveryDelay){paramArr[0]=3,paramArr[1]=8;var merchantDelay=remplaceParamsInConstants(CONSTANTS["product.page.block.purchase.delivery.seller"],paramArr)}else{paramArr[0]=deliveryDelay;merchantDelay=remplaceParamsInConstants(CONSTANTS["product.page.block.purchase.deliverydelay.seller"],paramArr);1===deliveryDelay&&(merchantDelay=remplaceParamsInConstants(CONSTANTS["product.page.block.purchase.deliverydelay.seller.single"],paramArr))}return merchantDelay},dynamizefinancingDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-financing-"+offerCatentryId).each(function(){var dynamizefinancingDOM=$j(this),oldFinancing=dynamizefinancingDOM.find("p").hasClass("on")?"on":"off",newFinancing=productToDynamize.eligibleOneyFinancing?"on":"off";dynamizefinancingDOM.find("p").removeClass(oldFinancing).addClass(newFinancing),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Payer en 3 ou 4 fois",oldFinancing,newFinancing)})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Payer en 3 ou 4 fois]","ERROR: "+err),console.error(err)}},dynamizeUnitQuantityPriceDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-unitquantityprice-"+offerCatentryId).each(function(){var dynamicUnitQuantityPriceDOM=$j(this),unitQuantityPriceDOM=dynamicUnitQuantityPriceDOM.find(".unitQuantityPrice span.amount"),unitQuantityPrice=productToDynamize.offer.price.unitQuantityPrice;if(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Prix unitaire au litre ou au kilo",unitQuantityPriceDOM.html()+"€"),!productToDynamize.bundle){unitQuantityPriceDOM.html(formatPrice(unitQuantityPrice));var ecoPartAmount=productToDynamize.taxes.ecoParticipation.amount,privateCopyAmount=productToDynamize.taxes.privateCopy.amount;if(0<ecoPartAmount||0<privateCopyAmount)dynamicUnitQuantityPriceDOM.find(".unitQuantityPrice span.separator").html("&nbsp;-&nbsp;");else dynamicUnitQuantityPriceDOM.addClass("unitPriceOnly");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Prix unitaire au litre ou au kilo",unitQuantityPriceDOM.html()+"€")}})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Prix unitaire au litre ou au kilo]","ERROR: "+err),console.error(err)}},dynamizeSimilarProductDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-similar-"+offerCatentryId).each(function(){var dynamizeSimilarProductDOM=$j(this),oldSimilarProduct=dynamizeSimilarProductDOM.hasClass("on")?"on":"off",newSimilarProduct=isSimilarProductDisplay(offerCatentryId,productToDynamize,logger)?"on":"off";dynamizeSimilarProductDOM.removeClass(oldSimilarProduct).addClass(newSimilarProduct),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Produit similaire",oldSimilarProduct,newSimilarProduct)})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Produit similaire]","ERROR: "+err),console.error(err)}},dynamizeTaxesDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-taxes-"+offerCatentryId).each(function(){var dynamicTaxesDOM=$j(this),ecoPartAmount=productToDynamize.taxes.ecoParticipation.amount,dynamicEcoPartDOM=(productToDynamize.taxes.ecoParticipation.type,dynamicTaxesDOM.find("p.ecoPart"));if(0<ecoPartAmount){var dynamicEcoPartAmountDOM=dynamicEcoPartDOM.find("span.eco-amt");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Taxes - EcoParticipation - Montant",dynamicEcoPartAmountDOM.html(),formatPrice(ecoPartAmount)),dynamicEcoPartAmountDOM.html(formatPrice(ecoPartAmount));var dynamicEcoPartWordingDOM=dynamicEcoPartDOM.find(".eco-lien");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Taxes - EcoParticipation - Libelle",dynamicEcoPartWordingDOM.html(),CONSTANTS["product.page.block.purchase.eco.participation.link"]),dynamicEcoPartWordingDOM.html(CONSTANTS["product.page.block.purchase.eco.participation.link"]),dynamicEcoPartDOM.removeClass("off").addClass("on")}else logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Taxes - EcoParticipation","Pas de taxe parametre pour ce produit"),dynamicEcoPartDOM.removeClass("on").addClass("off");var privateCopyAmount=productToDynamize.taxes.privateCopy.amount,dynamicPrivateCopyDOM=dynamicTaxesDOM.find("p.copiePrivee");if(0<privateCopyAmount){logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Taxes - Copie privee","Actif"),dynamicPrivateCopyDOM.removeClass("off").addClass("on");var dynamicPrivateCopyAmountDOM=dynamicPrivateCopyDOM.find(".amount");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Taxes - Copie privee - Montant",dynamicPrivateCopyAmountDOM.html(),formatPrice(privateCopyAmount)),dynamicPrivateCopyAmountDOM.html(formatPrice(privateCopyAmount)),dynamicPrivateCopyDOM.find(".privatecopying").html(CONSTANTS["product.page.block.purchase.privatecopying"])}else logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Taxes - Copie privee","Pas de taxe parametre pour ce produit"),dynamicPrivateCopyDOM.removeClass("on").addClass("off")})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Taxes]","ERROR: "+err),console.error(err)}},dynamizeAlertDispoDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-alertDispo-"+offerCatentryId).each(function(){var newAlertDispo,dynamizeAlertDispoDOM=$j(this),oldAlertDispo=dynamizeAlertDispoDOM.attr("class");-1!=oldAlertDispo.indexOf("on")&&(oldAlertDispo="on"),-1!=oldAlertDispo.indexOf("off")&&(oldAlertDispo="off"),newAlertDispo=isAlertDispoDisplay(offerCatentryId,productToDynamize,logger)?"on":"off",logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Alerte Disponibilite",oldAlertDispo,newAlertDispo),newAlertDispo!=oldAlertDispo&&dynamizeAlertDispoDOM.removeClass(oldAlertDispo).addClass(newAlertDispo)})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Alerte Disponibilite]","ERROR: "+err),console.error(err)}},dynamizeDeliveryFeesDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-deliveryFees-"+offerCatentryId).each(function(){var dynamizeDeliveryFeesDOM=$j(this);if(isDeliveryFeeDisplay(offerCatentryId,productToDynamize,logger)){var shippingMessage,shippingCost=productToDynamize.shipping.cost;if(0!==shippingCost&&void 0!==shippingCost){var paramsArr=new Array;paramsArr[0]=formatPrice(shippingCost),shippingMessage=remplaceParamsInConstants(CONSTANTS["product.page.block.purchase.shipping.cost"],paramsArr)}else shippingMessage=CONSTANTS["product.page.block.purchase.shipping.cost.offered"]+'<span class="icon-asterisk asterisk-2">(2)</span>';logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Frais de livraison",dynamizeDeliveryFeesDOM.html(),shippingMessage),dynamizeDeliveryFeesDOM.html(shippingMessage),dynamizeDeliveryFeesDOM.removeClass("off").addClass("on"),0<$j(".asterisk-2").size()&&$j("#messageDeliveryFreeFees").show()}})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Frais de livraison]","ERROR: "+err),console.error(err)}},dynamizeAvailabilityLabelDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-stock-label-"+offerCatentryId).each(function(){var dynamicAvailabilityDOM=$j(this);if(productToDynamize.offer.boulangerOffer){var newAvailabilitySticker,availability=dynamicAvailabilityDOM.html(),flagWording=productToDynamize.offer.availability.flagWording,flagPicto=productToDynamize.offer.availability.flagPicto,securityDays=productToDynamize.offer.availability.securityDays,launchDate=productToDynamize.offer.availability.launchDate,oldAvailabilitySticker=dynamicAvailabilityDOM.attr("class");-1!=oldAvailabilitySticker.indexOf("yes")&&(oldAvailabilitySticker="yes"),-1!=oldAvailabilitySticker.indexOf("reappro")&&(oldAvailabilitySticker="reappro"),-1!=oldAvailabilitySticker.indexOf("no")&&(oldAvailabilitySticker="no"),"Y"==flagPicto&&(newAvailabilitySticker="yes"),"R"==flagPicto&&(newAvailabilitySticker="R"==$j(this).attr("data-flag")||"DP"==$j(this).attr("data-flag")?"reapproR":"reappro"),"N"==flagPicto&&(newAvailabilitySticker="no"),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Disponiblite Picto",oldAvailabilitySticker,newAvailabilitySticker),dynamicAvailabilityDOM.removeClass(oldAvailabilitySticker).addClass(newAvailabilitySticker);var paramArr=new Array;paramArr[0]="Y"==flagPicto&&"SN"==flagWording?launchDate:securityDays;var finalConstant="",availabilityWording=CONSTANTS["stock.product.availability.label."+flagWording];finalConstant=void 0===availabilityWording?"":remplaceParamsInConstants(availabilityWording,paramArr),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Label Disponiblite",availability,finalConstant),""!==finalConstant&&dynamicAvailabilityDOM.html(finalConstant)}else{logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","On affiche le lien marchand"),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","On affiche le lien marchand");var merchantDelay=getDeliveryDelay(productToDynamize);dynamicAvailabilityDOM.html("<span>"+merchantDelay+"</span>")}})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Label Disponiblite]","ERROR: "+err),console.error(err)}},dynamizeAvailabilityDOM=function(offerCatentryId,productToDynamize,logger,isRecette){try{var isNationalLaunch=!1;try{if(productToDynamize.offer.boulangerOffer){var nbDayBetweenTodayAndBackInStockDate=daydiff(parseDate(productToDynamize.shipping.baseAvailableDate));(void 0!==productToDynamize.offer.availability.launchDate&&null!==productToDynamize.offer.availability.launchDate||void 0!==nbDayBetweenTodayAndBackInStockDate&&20<nbDayBetweenTodayAndBackInStockDate)&&(isNationalLaunch=!0)}}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Date de sortie nationale]","WARN: "+err)}var meilleurDelai,countCall=0;$j(".dynamic-stock-"+offerCatentryId).each(function(){countCall++;var dynamicAvailabilityDOM=$j(this);if(productToDynamize.offer.boulangerOffer){dynamicAvailabilityDOM.html(),productToDynamize.offer.availability.flagWording;var newAvailabilitySticker,flagPicto=productToDynamize.offer.availability.flagPicto,launchDateFormatted=(productToDynamize.offer.availability.securityDays,productToDynamize.offer.availability.launchDate,productToDynamize.offer.availability.launchDateFormatted),oldAvailabilitySticker=dynamicAvailabilityDOM.attr("class");-1!=oldAvailabilitySticker.indexOf("yes")&&(oldAvailabilitySticker="yes"),-1!=oldAvailabilitySticker.indexOf("reappro")&&(oldAvailabilitySticker="reappro"),-1!=oldAvailabilitySticker.indexOf("no")&&(oldAvailabilitySticker="no"),"Y"==flagPicto&&(newAvailabilitySticker="yes"),"R"==flagPicto&&(newAvailabilitySticker="R"==$j(this).attr("data-flag")||"DP"==$j(this).attr("data-flag")?"reapproR":"reappro"),"N"==flagPicto&&(newAvailabilitySticker="no"),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Disponiblite Picto",oldAvailabilitySticker,newAvailabilitySticker),dynamicAvailabilityDOM.removeClass(oldAvailabilitySticker).addClass(newAvailabilitySticker);var deliveryDOM=$j(this).parents().find(".purchaseBlockDetails"),dynamicDeliveryDOM=$j(this).find(".deliveryDatesModal");if(isDeliveryDisplay(offerCatentryId,productToDynamize,logger))if(productToDynamize.offer.boulangerOffer){var date=productToDynamize.shipping.baseAvailableDate,week=productToDynamize.shipping.baseAvailableWeek,day=productToDynamize.shipping.baseAvailableDay,hour=productToDynamize.shipping.baseAvailableHour,availableShipmodes=productToDynamize.shipping.availableShipmodes;""!==date&&"null"!==date&&(deliveryDOM.find(".dateOfBaseAvailableDate").val(date),deliveryDOM.find(".weekOfBaseAvailableDate").val(week),deliveryDOM.find(".dayOfBaseAvailableDate").val(day),deliveryDOM.find(".hourOfBaseAvailableDate").val(hour)),""!==availableShipmodes&&"null"!=availableShipmodes&&deliveryDOM.find(".shipmodesId").val(availableShipmodes);var str_availableShipmodes=deliveryDOM.find(".shipmodesId").val(),dDate=deliveryDOM.find(".dateOfBaseAvailableDate").val(),dWeek=deliveryDOM.find(".weekOfBaseAvailableDate").val(),dDay=deliveryDOM.find(".dayOfBaseAvailableDate").val(),dHour=deliveryDOM.find(".hourOfBaseAvailableDate").val();if("E"==productToDynamize.logisticCode){if(0<=str_availableShipmodes.indexOf("14551"))dynamizeLabelAvailabilityDOM(dynamicAvailabilityDOM,productToDynamize,isNationalLaunch,dDate,launchDateFormatted);else{1==countCall&&(meilleurDelai=calculMeilleurDelai(str_availableShipmodes,dDate,dWeek,dDay,dHour,isRecette,isNationalLaunch));dynamicDeliveryDOM.find(".dynamicDeliveryDate");void 0!==meilleurDelai?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison",dynamicAvailabilityDOM.html(),meilleurDelai.lowerDate),isTomorrow(meilleurDelai.lowerDate)?dynamicAvailabilityDOM.html(CONSTANTS["stock.product.availability.D"]):dynamicAvailabilityDOM.html("Chez vous &agrave; partir du <span>"+meilleurDelai.lowerDate+"</span>")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison",'Erreur lors du calcul de la meilleure date, On affiche le lien "Voir les dates de livraison"'),dynamicAvailabilityDOM.html(""))}null!==$j(".product_item_delivery_item")&&$j.each($j(".product_item_delivery_item"),function(key,blocLivraison){var arrayTransporteursIds=$j(this).attr("date-shipmodes-ids").split("_"),shipmodeName=$j(this).attr("date-shipmode-name"),meilleurDelai=getMeilleurDelai(arrayTransporteursIds,dDate,dWeek,dDay,dHour);void 0!==meilleurDelai&&afficherDatesDynamiseesDansOngletSim($j(this),meilleurDelai,shipmodeName)})}else"L"==productToDynamize.logisticCode?dynamizeLabelAvailabilityDOM(dynamicAvailabilityDOM,productToDynamize,isNationalLaunch,dDate,launchDateFormatted):dynamicAvailabilityDOM.html(CONSTANTS["product.page.block.purchase.deliverydate.esd"])}else{logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","On affiche le lien marchand"),(paramArr=new Array)[0]=3,paramArr[1]=8;var merchantDelay=remplaceParamsInConstants(CONSTANTS["product.page.block.purchase.delivery.seller"],paramArr);dynamicAvailabilityDOM.html("<span>"+merchantDelay+"</span>")}else logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","Pas de lien a afficher par rapport a la disponibilite du produit"),dynamicAvailabilityDOM.html(CONSTANTS["stock.product.availability.NB"])}else{logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","On affiche le lien marchand");var paramArr=new Array;logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","On affiche le lien marchand");merchantDelay=getDeliveryDelay(productToDynamize);dynamicAvailabilityDOM.html("<span>"+merchantDelay+"</span>")}})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Disponiblite]","ERROR: "+err),console.error(err)}},dynamizeLabelAvailabilityDOM=function(dynamicAvailabilityDOM,productToDynamize,isNationalLaunch,dDate,launchDateFormatted){void 0!==productToDynamize.offer.stock.sellOnRoad&&productToDynamize.offer.stock.sellOnRoad||isNationalLaunch?isNationalLaunch?dDate<launchDateFormatted?dynamicAvailabilityDOM.html("Chez vous &agrave; partir du <span>"+launchDateFormatted+'<span class="icon-asterisk asterisk-2">(2)</span></span>'):dynamicAvailabilityDOM.html("Chez vous &agrave; partir du <span>"+addXDaysToDate(dDate,1)+'<span class="icon-asterisk asterisk-2">(2)</span></span>'):productToDynamize.offer.stock.sellOnRoad&&dynamicAvailabilityDOM.html("Chez vous &agrave; partir du <span>"+addXDaysToDate(dDate,1)+'<span class="icon-asterisk asterisk-2">(2)</span></span>'):(isToday(dDate)||isTomorrow(dDate))&&before10PM()?isMobile?dynamicAvailabilityDOM.html(CONSTANTS["stock.product.availability.D"]):dynamicAvailabilityDOM.html(CONSTANTS["stock.product.availability.D"]+'<span class="icon-asterisk asterisk-2">(2)</span>'):dynamicAvailabilityDOM.html("Chez vous &agrave; partir du <span>"+addXDaysToDate(dDate,2)+'<span class="icon-asterisk asterisk-2">(2)</span></span>')},dynamizePriceDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-price-"+offerCatentryId).each(function(){var dynamicPriceDOM=$j(this),amount=productToDynamize.offer.price.amount,exponentPriceDOM=dynamicPriceDOM.find("p span.exponent"),fractionPriceDOM=dynamicPriceDOM.find("p span.fraction");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Prix",exponentPriceDOM.html()+"€"+fractionPriceDOM.html(),getExponent(amount)+"€"+getFraction(amount)),exponentPriceDOM.html(getExponent(amount)),fractionPriceDOM.html(getFraction(amount));var referenceAmount=productToDynamize.offer.price.referenceAmount,discountAmount=productToDynamize.offer.price.discountAmount,discountPercent=productToDynamize.offer.price.discountPercent;if(referenceAmount!=amount&&void 0!==discountAmount&&0!==discountAmount&&void 0!==discountPercent&&0!==discountPercent)if(productToDynamize.bundle){exponentStrikeoutPriceDOM=dynamicPriceDOM.find(".productStrikeoutPrice span.priceBarre span.exponent"),fractionStrikeoutPriceDOM=dynamicPriceDOM.find(".productStrikeoutPrice span.priceBarre span.fraction"),percentDOM=dynamicPriceDOM.find("span.priceDiscount span.percent");var exponentDiscountPriceDOM=dynamicPriceDOM.find(".productStrikeoutPrice span.priceDiscount .amount span.exponent"),fractionDiscountPriceDOM=dynamicPriceDOM.find(".productStrikeoutPrice span.priceDiscount .amount span.fraction");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Reduction - Prix barre",exponentStrikeoutPriceDOM.html()+"€"+fractionStrikeoutPriceDOM.html(),getExponent(referenceAmount)+"€"+getFraction(referenceAmount)),exponentStrikeoutPriceDOM.html(getExponent(referenceAmount)),fractionStrikeoutPriceDOM.html(getFraction(referenceAmount)),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Reduction - Pourcentage",percentDOM.html()+"%",discountPercent+"%"),percentDOM.html(discountPercent),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Reduction - Montant reduction",exponentDiscountPriceDOM.html()+","+fractionDiscountPriceDOM.html()+"€",getExponent(discountAmount)+","+getFraction(discountAmount)+"€"),exponentDiscountPriceDOM.html(getExponent(discountAmount)),fractionDiscountPriceDOM.html(getFraction(discountAmount)),dynamicPriceDOM.find("span.productStrikeoutPrice").removeClass("off").addClass("on"),dynamicPriceDOM.removeClass("priceReduc").addClass("priceEco"),dynamicPriceDOM.find("span.priceDiscount").removeClass("off").addClass("on")}else{var exponentStrikeoutPriceDOM=dynamicPriceDOM.find(".productStrikeoutPrice span.priceBarre span.exponent"),fractionStrikeoutPriceDOM=dynamicPriceDOM.find(".productStrikeoutPrice span.priceBarre span.fraction"),percentDOM=dynamicPriceDOM.find("span.priceDiscount span.percent");logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Reduction - Prix barre",exponentStrikeoutPriceDOM.html()+"€"+fractionStrikeoutPriceDOM.html(),getExponent(referenceAmount)+"€"+getFraction(referenceAmount)),exponentStrikeoutPriceDOM.html(getExponent(referenceAmount)),fractionStrikeoutPriceDOM.html(getFraction(referenceAmount)),logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Reduction - Pourcentage",percentDOM.html()+"%",discountPercent+"%"),percentDOM.html(discountPercent);productToDynamize.offer.price.strikeoutLabel;"string"==typeof dynamicPriceDOM.attr("data-page-key")&&dynamicPriceDOM.attr("data-page-key"),dynamicPriceDOM.find("span.productStrikeoutPrice").removeClass("off").addClass("on"),dynamicPriceDOM.removeClass("priceEco").addClass("priceReduc"),dynamicPriceDOM.find("span.priceDiscount").removeClass("off").addClass("on")}else logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Reduction","Pas de prix barre parametre pour cette offre"),dynamicPriceDOM.find("span.productStrikeoutPrice").removeClass("on").addClass("off"),dynamicPriceDOM.removeClass("priceReduc").removeClass(""),dynamicPriceDOM.find("span.priceDiscount").removeClass("on").addClass("off")})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Prix]","ERROR - "+err),console.error(err)}},dynamizeDeliveryDOM=function(offerCatentryId,productToDynamize,logger,isRecette){try{var isNationalLaunch=!1;null!==productToDynamize.offer.availability.launchDate&&void 0!==productToDynamize.offer.availability.launchDate&&(isNationalLaunch=!0);$j(".dynamic-deliveryDetails-"+offerCatentryId).each(function(){0;$j(this);var dynamicDeliveryDOM=$j(this).find(".deliveryDatesModal");if("ESD"==productToDynamize.typology){if(dynamicDeliveryDOM.html("<span>"+CONSTANTS["product.page.block.purchase.deliverydate.esd.deliverable"]+"</span>"),isNationalLaunch){var paramArr=new Array;paramArr[0]=productToDynamize.offer.availability.launchDate,dynamicDeliveryDOM.append(remplaceParamsInConstants(CONSTANTS["product.page.block.purchase.deliverydate.esd.nationalLaunchDate"],paramArr))}}else isDeliveryDisplay(offerCatentryId,productToDynamize,logger)?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison",'On affiche le lien "Voir les delais et options"'),dynamicDeliveryDOM.html("<span>"+CONSTANTS["product.page.block.purchase.deliverydate.deliverable"]+"</span>")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Lien livraison","Pas de lien a afficher par rapport a la disponibilite du produit"),dynamicDeliveryDOM.html(""))})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Lien livraison]","ERROR - "+err),console.error(err)}},dynamizePurchaseButtonDOM=function(offerCatentryId,productToDynamize,logger){try{var purchaseButtonDisplay=isPurchaseButtonDisplay(offerCatentryId,productToDynamize,logger);$j(".dynamic-onlinePurchase-"+offerCatentryId).each(function(){var dynamicPurchaseButtonDOM=$j(this);purchaseButtonDisplay?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bouton Achat","Actif"),dynamicPurchaseButtonDOM.removeClass("off").addClass("on")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bouton Achat","Pas de bouton achat par rapport a la disponibilite du produit"),dynamicPurchaseButtonDOM.removeClass("on").addClass("off"))}),$j(".dynamic-pickupPurchase-"+offerCatentryId).each(function(){var dynamicPickupButtonDOM=$j(this);!purchaseButtonDisplay&&isBuyableAndPublished(offerCatentryId,productToDynamize,logger)&&0<productToDynamize.presenceIndicator?dynamicPickupButtonDOM.attr("data-eb-pick-up-remove")?removeRecoBloc(offerCatentryId):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bouton Retrait","Actif"),dynamicPickupButtonDOM.removeClass("off").addClass("on")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bouton Retrait","Pas de bouton retrait par rapport a la disponibilite du produit"),dynamicPickupButtonDOM.removeClass("on").addClass("off"))}),purchaseButtonDisplay||isBuyableAndPublished(offerCatentryId,productToDynamize,logger)&&!(productToDynamize.presenceIndicator<=0)||removeRecoBloc(offerCatentryId)}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bouton Achat]","ERROR - "+err),console.error(err)}},dynamizePickUpButtonDOM=function(offerCatentryId,productToDynamize,logger,proximityAvailable){try{$j(".dynamic-storePickup-"+offerCatentryId).each(function(){var dynamicPickUpButtonDOM=$j(this),dynamicPickUpDivAvailableDOM=dynamicPickUpButtonDOM.find("div.case1"),dynamicPickUpDivUnavailableDOM=dynamicPickUpButtonDOM.find("div.case3"),dynamicPickUpWordingAvailableDOM=dynamicPickUpButtonDOM.find("div.case1 p a.storeChoice"),dynamicPickUpWordingUnavailableDOM=dynamicPickUpButtonDOM.find("div.case3 p");dynamicPickUpButtonDOM.find("div.purchaseBlockTitle").html(CONSTANTS["product.page.block.purchase.storepickup.title"]);CONSTANTS["product.page.block.purchase.storepickup.otherstore"];isPickUpButtonDisplay(offerCatentryId,productToDynamize,logger)&&productToDynamize.offer.boulangerOffer?isBuyableAndPublished(offerCatentryId,productToDynamize,logger)&&0<productToDynamize.presenceIndicator?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bloc Retrait - Libelle","Voir les autres magasins - Actif"),dynamicPickUpDivAvailableDOM.removeClass("off").addClass("on"),dynamicPickUpDivUnavailableDOM.removeClass("on").addClass("off"),void 0!==proximityAvailable&&!0===proximityAvailable?dynamicPickUpWordingAvailableDOM.html("Choisir un autre magasin<br/>"):dynamicPickUpWordingAvailableDOM.html(CONSTANTS["product.page.block.purchase.storepickup.choosemystore"]+"<br/>")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bloc Retrait","Indisponible pour ce produit - Actif"),void 0!==proximityAvailable&&!1===proximityAvailable&&0<productToDynamize.offer.stock.numberOfAvailableStore?dynamicPickUpWordingUnavailableDOM.html("Indisponible à proximité<br/>"):dynamicPickUpWordingUnavailableDOM.html(CONSTANTS["product.page.block.purchase.storepickup.unavailable"]+"<br/>"),void 0!==proximityAvailable&&!0===proximityAvailable?(dynamicPickUpDivAvailableDOM.removeClass("off").addClass("on"),dynamicPickUpDivUnavailableDOM.removeClass("on").addClass("off"),dynamicPickUpWordingAvailableDOM.html("Choisir un autre magasin<br/>")):(dynamicPickUpDivAvailableDOM.removeClass("on").addClass("off"),dynamicPickUpDivUnavailableDOM.removeClass("off").addClass("on"),dynamicPickUpDivAvailableDOM.find("p").removeClass("on").addClass("off"))):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bloc Retrait","Indisponible pour ce produit - Actif"),dynamicPickUpDivAvailableDOM.removeClass("on").addClass("off"),dynamicPickUpDivUnavailableDOM.removeClass("off").addClass("on"),dynamicPickUpWordingUnavailableDOM.html(CONSTANTS["product.page.block.purchase.storepickup.unavailable"]+"<br/>"))})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bloc Retrait]","ERROR - "+err),console.error(err)}},dynamizeMerchantOfferDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-messagerie-offer-"+offerCatentryId).each(function(){var dynamicMessagerieOfferDOM=$j(this),dynamicOfferQuestionDOM=dynamicMessagerieOfferDOM.find("div.exchangesMerchant"),partnumber=dynamicOfferQuestionDOM.attr("data-partnumber"),link="/ref/"+(partnumber*=1)+"/messagerie/"+dynamicOfferQuestionDOM.attr("data-offer-id");dynamicOfferQuestionDOM.html('<a href="'+link+'" class="consultQuestion">'+CONSTANTS["product.page.merchant.offer.consult.question"]+"</a>"),dynamicMessagerieOfferDOM.find("div.merchantQuestionLink").html(CONSTANTS["product.page.merchant.seller.answer"]),dynamicMessagerieOfferDOM.find("a.titleAllOffers").html(CONSTANTS["product.page.merchant.all.offers"])})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation messagerie sur offre marchand]","ERROR - "+err),console.error(err)}},dynamizeBundleOfferDOM=function(offerCatentryId,productToDynamize,logger){},dynamizeItemOfferDOM=function(offerCatentryId,productToDynamize,logger){},dynamizeWithdrawalStores=function(offerCatentryId,productToDynamize,logger){try{void 0!==bl.woosmap&&(null!==storesInformations?console.log(storesInformations):(isGoogleShoppingLIAContext?bl.woosmap.getStoreById(function(storeFeature){return _callBackDynamizeWithdrawalStores(storeFeature,offerCatentryId,productToDynamize,logger)}):bl.woosmap.getUserRecommendation(function(storeFeature){return _callBackDynamizeWithdrawalStores(storeFeature,offerCatentryId,productToDynamize,logger)},8),$j("#purchaseBlockWithdrawal-wording1-"+productToDynamize.catentryId).hasClass("on")||$j(".dynamic-storePickup-"+offerCatentryId).each(function(){var dynamicPickUpButtonDOM=$j(this),dynamicPickUpDivAvailableDOM=dynamicPickUpButtonDOM.find("div.case1"),dynamicPickUpDivUnavailableDOM=dynamicPickUpButtonDOM.find("div.case3"),dynamicPickUpWordingAvailableDOM=dynamicPickUpButtonDOM.find("div.case1 p a.storeChoice");dynamicPickUpButtonDOM.find("div.case3 p");dynamicPickUpButtonDOM.find("div.purchaseBlockTitle").html(CONSTANTS["product.page.block.purchase.storepickup.title"]),isPickUpButtonDisplay(offerCatentryId,productToDynamize,logger)&&productToDynamize.offer.boulangerOffer&&(isBuyableAndPublished(offerCatentryId,productToDynamize,logger)&&0<productToDynamize.presenceIndicator?(dynamicPickUpDivAvailableDOM.removeClass("off").addClass("on"),dynamicPickUpDivUnavailableDOM.removeClass("on").addClass("off"),dynamicPickUpWordingAvailableDOM.html(CONSTANTS["product.page.block.purchase.storepickup.choosemystore"]+"<br/>")):(dynamicPickUpDivAvailableDOM.removeClass("on").addClass("off"),dynamicPickUpDivUnavailableDOM.removeClass("off").addClass("on")))})))}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bloc Retrait]","ERROR - "+err),console.error(err)}},_callBackDynamizeWithdrawalStores=function(storesFeatures,offerCatentryId,productToDynamize,logger){var stockContextualized=new StockContextualized(offerCatentryId,productToDynamize,storesFeatures,googleShoppingLIAStoreCode,!1);$j("#purchaseBlockWithdrawal-"+productToDynamize.catentryId).each(function(){$j(this);void 0!==stockContextualized.store1Wording?$j(".purchaseBlockWithdrawal-wording1-"+productToDynamize.catentryId).each(function(){var divWording1=$j(this);void 0!==stockContextualized.store2Wording?divWording1.html(stockContextualized.store1Wording+stockContextualized.store2Wording):divWording1.html(stockContextualized.store1Wording),divWording1.removeClass("off").addClass("on"),stockContextualized.storeExpress?$j("#messageRetraitExpress").show():$j("#messageRetraitExpress").hide(),dynamizePickUpButtonDOM(offerCatentryId,productToDynamize,logger,!0)}):dynamizePickUpButtonDOM(offerCatentryId,productToDynamize,logger,!1),isGoogleShoppingLIAContext&&dynamizeWithdrawalStoresDOMWithGoogleShoppingLiaRules(offerCatentryId,productToDynamize,logger)})},dynamizeWithdrawalStoresForSellerDOM=function(offerCatentryId,productToDynamize,sellerInfoStoreStock,logger){try{void 0!==bl.woosmap&&(null!==storesInformations?console.log(storesInformations):(bl.woosmap.getUserRecommendation(function(storesFeatures){var stockContextualized=new StockContextualized(offerCatentryId,productToDynamize,storesFeatures,googleShoppingLIAStoreCode,!0);$j("#purchaseBlockWithdrawal-"+productToDynamize.catentryId).each(function(){$j(this);void 0!==stockContextualized.store1Wording?$j(".purchaseBlockWithdrawal-wording1-"+productToDynamize.catentryId).each(function(){var divWording1=$j(this),wordingStockMagasin=stockContextualized.store1Wording+" <strong>["+sellerInfoStoreStock+"]</strong>";divWording1.html(wordingStockMagasin),divWording1.removeClass("off").addClass("on"),stockContextualized.storeExpress?$j("#messageRetraitExpress").show():$j("#messageRetraitExpress").hide(),dynamizePickUpButtonDOM(offerCatentryId,productToDynamize,logger,!0)}):dynamizePickUpButtonDOM(offerCatentryId,productToDynamize,logger,!1)})},8),$j(".dynamic-storePickup-"+offerCatentryId).each(function(){var dynamicPickupDOM=$j(this);if(void 0!==dynamicPickupDOM){var storePickupDOM=dynamicPickupDOM.find(".storePickup-"+offerCatentryId);if(void 0!==storePickupDOM){var dataModalUrl=storePickupDOM.attr("data-modal-url");void 0!==dataModalUrl&&""!==dataModalUrl&&(dataModalUrl+="&isSeller=true",storePickupDOM.attr("data-modal-url",dataModalUrl))}}})))}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bloc Retrait pour vendeurs]","ERROR - "+err),console.error(err)}},dynamizeAvailabilityForSellerDOM=function(offerCatentryId,sellerInfoWarehouseQty,logger){try{$j(".dynamic-stock-"+offerCatentryId).each(function(){var dynamicAvailabilityDOM=$j(this),availabilityText=dynamicAvailabilityDOM.html();if(0!==$j(".dynamic-stock-"+offerCatentryId+" strong").length)$j(".dynamic-stock-"+offerCatentryId+" strong").html("["+sellerInfoWarehouseQty+"]");else{var divAvailabilityWording=availabilityText+" <strong>["+sellerInfoWarehouseQty+"]</strong>";dynamicAvailabilityDOM.html(divAvailabilityWording)}})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Disponiblite pour vendeurs]","ERROR: "+err),console.error(err)}},dynamizeInformationsForSellerDOM=function(offerCatentryId,sellerInfoVendeur,sellerInfoGamme,logger){try{$j(".dynamic-seller-"+offerCatentryId).each(function(){var dynamicInformationsDOM=$j(this),divAvailabilityWording="";null!==sellerInfoVendeur&&(divAvailabilityWording=sellerInfoVendeur),null!==sellerInfoGamme&&(divAvailabilityWording=divAvailabilityWording+"<span id='gamme'>"+sellerInfoGamme+"</span>"),dynamicInformationsDOM.html(divAvailabilityWording)})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation informations vendeurs]","ERROR: "+err),console.error(err)}},dynamizePurchaseButtonForSellerDOM=function(offerCatentryId,sellerInfoProductCode,sellerInfoProductQty,logger){try{$j(".dynamic-onlinePurchase-"+offerCatentryId).each(function(){var dynamicSellerDataDOM=$j(this).find(".sellerData");if(void 0!==dynamicSellerDataDOM){var sellerData="<input type='hidden' id='"+("codeProduct-"+offerCatentryId)+"' value='"+sellerInfoProductCode+"'/>"+("<input type='hidden' id='"+("bundleProductQuantity-"+offerCatentryId)+"' value='"+sellerInfoProductQty+"'/>");dynamicSellerDataDOM.html(sellerData)}})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bouton Achat vendeurs]","ERROR - "+err),console.error(err)}},dynamizeConsultAvailabilityDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-offer-data-"+offerCatentryId+" .x-consultAvailability").each(function(){var dynamicConsultAvailabilityButtonDOM=$j(this);productToDynamize.offer.buyable?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bouton Consulter la disponibilité","Actif"),dynamicConsultAvailabilityButtonDOM.removeClass("off").addClass("on")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","Bouton Consulter la disponibilité","Inactif"),dynamicConsultAvailabilityButtonDOM.removeClass("on").addClass("off"))})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bouton Consulter la disponibilité]","ERROR - "+err),console.error(err)}},dynamizeWithdrawalStoresDOMWithGoogleShoppingLiaRules=function(offerCatentryId,productToDynamize,logger){$j(".dynamic-storePickup-"+offerCatentryId).each(function(){var dynamicPickUpWordingAvailableDOM=$j(this).find("div.purchaseBlockWithdrawal-wording1-"+productToDynamize.catentryId),wording=_getWordingForStoreLink(dynamicPickUpWordingAvailableDOM.html(),offerCatentryId,productToDynamize,logger),isDispo=productToDynamize.storeAvailabilities[googleShoppingLIAStoreCode],isExpress=!1;void 0!==isDispo&&isDispo&&(isExpress=productToDynamize.storeAvailabilities[googleShoppingLIAStoreCode].express),wording&&(dynamicPickUpWordingAvailableDOM.html(wording),isMobile||bl.catalog.modal.storePickup.bind()),isExpress||(isMobile?dynamicPickUpWordingAvailableDOM.addClass("reappro"):dynamicPickUpWordingAvailableDOM.addClass("reapproR"))})},dynamizeFlapAvailabilityDOM=function(offerCatentryId,productToDynamize,logger){try{$j(".dynamic-product-data-"+offerCatentryId).each(function(){var dynamicFlapAvailabilityDOM=$j(this);dynamicFlapAvailabilityDOM.removeClass("indispo"),isPurchaseButtonDisplay(offerCatentryId,productToDynamize,logger)?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","flap indisponibilite","pas de flap indisponibilite"),dynamicFlapAvailabilityDOM.removeClass("indispo")):!isPurchaseButtonDisplay(offerCatentryId,productToDynamize,logger)&&isBuyableAndPublished(offerCatentryId,productToDynamize,logger)&&0<productToDynamize.presenceIndicator?(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","flap indisponibilite","pas de flap indisponibilite"),dynamicFlapAvailabilityDOM.removeClass("indispo")):(logger.add("["+offerCatentryId+"| "+productToDynamize.partNumber+"]","flap indisponibilite","Actif"),dynamicFlapAvailabilityDOM.addClass("indispo"))})}catch(err){logger.add("["+offerCatentryId+"| Dynamisation Bouton Achat]","ERROR - "+err),console.error(err)}},dynamizeLabelsAndVisualDOM=function(refId,productToDynamize,logger){try{$j(".dynamic-label-"+refId).each(function(){var dynamicLabelDOM=$j(this),nomenclatureBrandDOM=dynamicLabelDOM.find(".nomenclatureBrand"),commercialLabelDOM=dynamicLabelDOM.find(".commercialLabel");nomenclatureBrandDOM.html(productToDynamize.nomenclatureBrand),commercialLabelDOM.html(productToDynamize.commercialLabel);var secondaryComponentsNomenclatureDOM=dynamicLabelDOM.find(".secondaryComponentsNomenclature"),secondaryComponentsNomenclature=productToDynamize.secondaryComponentsNomenclature;if(secondaryComponentsNomenclature){for(var arrayLength=secondaryComponentsNomenclature.length,labelSecondaryComponentsNomenclature="",i=0;i<arrayLength;i++)labelSecondaryComponentsNomenclature=labelSecondaryComponentsNomenclature+"+ "+secondaryComponentsNomenclature[i]+" ";secondaryComponentsNomenclatureDOM.html(labelSecondaryComponentsNomenclature)}}),$j(".dynamic-visual-"+refId).each(function(){var visualDOM=$j(this).find("img");visualDOM.attr("src",productToDynamize.visualUrl),visualDOM.attr("alt",productToDynamize.commercialLabel)})}catch(err){logger.add("["+refId+"| Dynamisation Label]","ERROR - "+err),console.error(err)}},dynamizeRatingsDOM=function(refId,productToDynamize,logger){try{$j(".dynamic-rating-"+refId).each(function(){var dynamicRatingDOM=$j(this);productToDynamize.averageOverallRating&&3.5<=parseFloat(productToDynamize.averageOverallRating)?(dynamicRatingDOM.find(".link").html("("+productToDynamize.totalCountRating+" avis)"),dynamicRatingDOM.find(".ems_rating").addClass("star_"+productToDynamize.averageOverallRating.replace(",","")),dynamicRatingDOM.find(".unlink").attr("href","/ref/"+refId+"#tab-bazaarvoice"),dynamicRatingDOM.css("display","inline-block")):dynamicRatingDOM.css("visibility","hidden")})}catch(err){logger.add("["+refId+"| Dynamisation Rating]","ERROR - "+err),console.error(err)}},dynamizeAddCartProductDOM=function(refId,productToDynamize,logger){try{$j('a[data-ref-id="'+refId+'"]').each(function(){if(isMobile){var urlHref=$j(this).attr("data-url");urlHref&&(urlHref=urlHref+"&catEntryId="+productToDynamize.offer.catentryId,$j(this).attr("data-url",urlHref))}else{var dataCartUrl=$j(this).attr("data-cart-url");dataCartUrl&&(dataCartUrl=dataCartUrl+"&catEntryId="+productToDynamize.offer.catentryId,$j(this).attr("data-cart-url",dataCartUrl));var dataSupportUrl=$j(this).attr("data-support-url");dataSupportUrl&&(dataSupportUrl=dataSupportUrl+"&catEntryId="+productToDynamize.offer.catentryId,$j(this).attr("data-support-url",dataSupportUrl));var dataUrl=$j(this).attr("data-url");dataUrl&&(dataUrl=dataUrl+"&catEntryId="+productToDynamize.offer.catentryId,$j(this).attr("data-url",dataUrl));var onClickCartUrl=$j(this).attr("onclick");if(onClickCartUrl){var onClickModified=onClickCartUrl.replace(/EB_PAGE_NAME_EB_XT_PAGE/g,productToDynamize.commercialLabel);$j(this).attr("onclick",onClickModified)}var dataModalUrl=$j(this).attr("data-modal-url");dataModalUrl&&(dataModalUrl=dataModalUrl+"&catentryId="+productToDynamize.offer.catentryId+"&productId="+productToDynamize.catentryId,$j(this).attr("data-modal-url",dataModalUrl))}})}catch(err){logger.add("["+refId+"| Dynamisation ajout panier]","ERROR - "+err),console.error(err)}},dynamizeWebCategoriesDOM=function(refId,productToDynamize,logger){try{$j(".dynamic-webCategory-"+refId).each(function(){var dynamicWebCategoryDOM=$j(this);productToDynamize.webCategoryName&&productToDynamize.webCategoryUrl&&(dynamicWebCategoryDOM.html(productToDynamize.webCategoryName),dynamicWebCategoryDOM.attr("href",bl.secureBaseHref+"/c/"+productToDynamize.webCategoryUrl))})}catch(err){logger.add("["+refId+"| Dynamisation Web Category]","ERROR - "+err),console.error(err)}},_getWordingForStoreLink=function(wording,offerCatentryId,productToDynamize,logger){var contentLink;return/^Disponible à*/.test(wording)?(contentLink=wording.substring(12,wording.length),isMobile?'Disponible à <a id="purchaseBlockWithdrawal-storeChoice-'+productToDynamize.catentryId+'" class="x-addToStore storeChoice" data-modal-googleShoppingStore ="'+googleShoppingLIAStoreCode+'" href="'+path+"/mBLMobileStoreDisplayCmd?catalogId=10001&amp;storeId=10001&amp;langId=-2&amp;catentryId="+offerCatentryId+"&productId="+productToDynamize.catentryId+"&partNumber="+productToDynamize.partNumber+"&store="+googleShoppingLIAStoreCode+'&openStore=1">'+contentLink+"<br></a>":'Disponible à <a id="purchaseBlockWithdrawal-storeChoice-'+productToDynamize.catentryId+'" class="x-addToStore storeChoice" data-modal-googleShoppingStore ="'+googleShoppingLIAStoreCode+'" data-modal-url="'+path+"catalog/storePickup?catalogId=10001&storeId=10001&langId=-2&catentryId="+offerCatentryId+"&productId="+productToDynamize.catentryId+'" href="javascript:void(0);">'+contentLink+"<br></a>"):/^Indisponible à*/.test(wording)?(contentLink=wording.substring(14,wording.length),isMobile?'Indisponible à <a id="purchaseBlockWithdrawal-storeChoice-'+productToDynamize.catentryId+'" class="x-addToStore storeChoice reappro" data-modal-googleShoppingStore ="'+googleShoppingLIAStoreCode+'" href="'+path+"/mBLMobileStoreDisplayCmd?catalogId=10001&amp;storeId=10001&amp;langId=-2&amp;catentryId="+offerCatentryId+"&productId="+productToDynamize.catentryId+"&partNumber="+productToDynamize.partNumber+"&store="+googleShoppingLIAStoreCode+'&openStore=1">'+contentLink+"<br></a>":'Indisponible à <a id="purchaseBlockWithdrawal-storeChoice-'+productToDynamize.catentryId+'" class="x-addToStore storeChoice reapproR" data-modal-googleShoppingStore ="'+googleShoppingLIAStoreCode+'" data-modal-url="'+path+"catalog/storePickup?catalogId=10001&storeId=10001&langId=-2&catentryId="+offerCatentryId+"&productId="+productToDynamize.catentryId+'" href="javascript:void(0);">'+contentLink+"<br></a>"):void 0},isDeliveryDisplay=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;if("N"==flagPicto&&"ND"==flagWording)return!1;if("R"==flagPicto&&"DP"==flagWording)return!1;if("Y"==flagPicto&&"SN"==flagWording){var stockNW=productToDynamize.offer.stock.warehouseQuantity;return"ESD"==productToDynamize.typology||0<stockNW}return("R"!=flagPicto||"R"!=flagWording)&&("Y"==flagPicto||"R"==flagPicto&&"DDP"==flagWording)}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Lien livraison]","ERROR - "+err),console.error(err),!1}},isPurchaseButtonDisplay=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;if("N"==flagPicto&&"ND"==flagWording)return!1;if("R"==flagPicto&&"DP"==flagWording)return!1;if("R"==flagPicto&&"R"==flagWording)return!1;if("Y"==flagPicto&&"SN"==flagWording){var stockNW=productToDynamize.offer.stock.warehouseQuantity;return"ESD"==productToDynamize.typology||0<stockNW}return"Y"==flagPicto||"R"==flagPicto&&"DDP"==flagWording}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Bouton Achat]","ERROR - "+err),console.error(err),!1}},isAlertDispoDisplay=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;return!(productToDynamize.bundle||!productToDynamize.offer.boulangerOffer)&&(("N"!=flagPicto||"ND"!=flagWording)&&(("R"!=flagPicto||"DP"!=flagWording)&&("R"==flagPicto&&"R"==flagWording)))}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Bouton Achat]","ERROR - "+err),console.error(err),!1}},isPickUpButtonDisplay=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;return"Y"==flagPicto&&"SN"==flagWording||("N"!=flagPicto||"ND"!=flagWording)&&("R"==flagPicto&&"DP"==flagWording||("R"==flagPicto&&"R"==flagWording||("Y"==flagPicto||"R"==flagPicto&&"DDP"==flagWording)))}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Bouton Retrait]","ERROR - "+err),console.error(err),!1}},isDeliveryFeeDisplay=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;if("N"==flagPicto&&"ND"==flagWording)return!1;if("R"==flagPicto&&"DP"==flagWording)return!1;if("R"==flagPicto&&"R"==flagWording)return!1;if("Y"==flagPicto&&"SN"==flagWording){var stockNW=productToDynamize.offer.stock.warehouseQuantity;return"ESD"==productToDynamize.typology||0<stockNW}return"Y"==flagPicto||"R"==flagPicto&&"DDP"==flagWording}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Frais de livraison]","ERROR: "+err),console.error(err),!1}},isSimilarProductDisplay=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;return!(productToDynamize.nbSimilarProducts<=0)&&("N"==flagPicto&&"ND"==flagWording||("R"==flagPicto&&"DP"==flagWording||("R"==flagPicto&&"R"==flagWording||"N"==flagPicto&&"NB"==flagWording)))}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Frais de livraison]","ERROR: "+err),console.error(err),!1}},isEligibleOnlinePurchase=function(offerCatentryId,productToDynamize,logger){try{var flagPicto=productToDynamize.offer.availability.flagPicto,flagWording=productToDynamize.offer.availability.flagWording;return"Y"==flagPicto||"R"==flagPicto&&"DDP"==flagWording}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation produit non eligible pour achat]","ERROR: "+err),console.error(err),!1}},isBuyableAndPublished=function(offerCatentryId,productToDynamize,logger){try{return!!(productToDynamize.published&&productToDynamize.buyable&&productToDynamize.offer.published&&productToDynamize.offer.buyable)}catch(err){return logger.add("["+offerCatentryId+"| Dynamisation Publication]","ERROR - "+err),console.error(err),!1}},getExponent=function(amount){var amountArr=(""+amount).split(".");return void 0!==amountArr?amountArr[0]:amount},getFraction=function(amount){var amountArr=(""+amount).split(".");return void 0!==amountArr&&void 0!==amountArr[1]?$j.rightPad(amountArr[1],2,"0"):"00"},remplaceParamsInConstants=function(constant,params){for(var result=constant,i=0;i<params.length;i++)result=result.replace("{"+i+"}",params[i]);return result},formatPrice=function(price){return(price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")+"€").replace(".",",")};function isTomorrow(date){try{var arrayDate=date.split("/"),stringDay=arrayDate[0],stringMonth=arrayDate[1]-1,stringYear=arrayDate[2],dateJS=new Date(stringYear,stringMonth,stringDay),tempDate=new Date(dateJS);tempDate.setDate(dateJS.getDate()-1);var sysDate=new Date;return sysDate.setHours(0,0,0,0),tempDate.getTime()==sysDate.getTime()}catch(err){return console.error(err),!1}}function isToday(date){try{var arrayDate=date.split("/"),stringDay=arrayDate[0],stringMonth=arrayDate[1]-1,stringYear=arrayDate[2],dateJS=new Date(stringYear,stringMonth,stringDay),sysDate=new Date;return sysDate.setHours(0,0,0,0),dateJS.getTime()==sysDate.getTime()}catch(err){return console.error(err),!1}}function before10PM(){return(new Date).getHours()<22}function addXDaysToDate(date,numberOfDays){try{var arrayDate=date.split("/"),stringDay=arrayDate[0],stringMonth=arrayDate[1]-1,stringYear=arrayDate[2],dateJS=new Date(stringYear,stringMonth,stringDay),newDate=new Date(dateJS);return newDate.setDate(dateJS.getDate()+numberOfDays),newDate.getDate()+"/"+(newDate.getMonth()+1)+"/"+newDate.getFullYear()}catch(err){return console.error(err),null}}function getAttrFromResponse(html,id,attr){var attrValue="";return html.each(function(index){$j(this).attr("id")===id&&(attrValue=$j(this).attr(attr))}),attrValue}function trim(string){return string.replace(/(^\s*)|(\s*$)/g,"")}$j(document).ready(function(){try{0<$j(".asterisk-1").size()&&$j("#messageRetraitExpress").show()}catch(e){console.error(e)}}),$j(document).ready(function(){authorizedCharacters()}),"undefined"==typeof bl&&(window.bl={}),jQuery.extend({isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)}}),$j.fn.removeClassRegEx=function(regex){var classes=$j(this).attr("class");if(!classes||!regex)return $j(this);for(var classArray=[],i=0,len=(classes=classes.split(" ")).length;i<len;i++)classes[i].match(regex)||classArray.push(classes[i]);return $j(this).attr("class",classArray.join(" ")),$j(this)},$j.initObject=function(obj){if("string"==typeof obj){var parent=window;$j.each(obj.split("."),function(index,name){void 0===parent[name]&&(parent[name]={}),parent=parent[name]})}},$j.leftPad=function(i,l,s){var o=i.toString();for(s||(s="0");o.length<l;)o=s+o;return o},$j.rightPad=function(i,l,s){var o=i.toString();for(s||(s="0");o.length<l;)o+=s;return o},$j.isBlank=function(text){return"string"!=typeof text||""===$j.trim(text)};var authorizedCharactersPatterns={alpha:/[.\-\s\ŒœŸÿ\0-9]/gi,numeric:/[^0-9]/g,alpha_numeric:/[.\-\s\ŒœŸÿ]/gi,email:/[^A-Z0-9@._\-]/gi};function replaceAccentedCharacters(value){return value=(value=(value=(value=value.replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/Œ/g),"OE")).replace(new RegExp(/[ÿ]/g),"y")).replace(new RegExp(/[Ÿ]/g),"Y")}function removeUnauthorizedCharacters(elt,pattern,replace){var value=$j(elt).val(),start=$j(elt)[0].selectionStart,end=$j(elt)[0].selectionEnd,length=value.length;return value=replaceAccentedCharacters(value),$j(elt).val(value),length!=value.length?$j(elt)[0].setSelectionRange(start+Math.abs(length-value.length),end+Math.abs(length-value.length)):$j(elt)[0].setSelectionRange(start,end),new RegExp(pattern).test(value)&&(value=value.replace(pattern,replace),$j(elt).val(value),"function"==typeof $j(elt)[0].setSelectionRange&&(""===replace?$j(elt)[0].setSelectionRange(start-1,end-1):$j(elt)[0].setSelectionRange(start,end))),!0}function authorizeAlphaCharacters(){$j(".authorize_alpha").live("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.alpha," ")})}function authorizeNumCharacters(){$j(".authorize_num").live("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.numeric,"")})}function authorizeAplhaNumCharacters(){$j(".authorize_aplha_num").live("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.alpha_numeric," ")})}function authorizeEMailCharacters(){$j(".authorize_email").live("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.email,"")})}function trimWhiteSpaces(){$j(".authorize_alpha, .authorize_num, .authorize_aplha_num, .authorize_email").live("blur",function(e){$j(this).val(trim($j(this).val()))})}function authorizedCharacters(){authorizeAlphaCharacters(),authorizeNumCharacters(),authorizeAplhaNumCharacters(),authorizeEMailCharacters(),trimWhiteSpaces()}"ontouchstart"in window||navigator.msMaxTouchPoints?isTouch=!0:isTouch=!1;var loadingLayerHandle=null;function showLoadingLayer(){if(0<$j("#blLoadingLayer").length)return $j("#blLoadingLayer .popup").css({top:$j(window).scrollTop()+100+"px","z-index":Box.zdIndex+100}),void $j("#blLoadingLayer").show();var html=$j('<div id="blLoadingLayer"></div>').css({height:$j(document).height()+"px"});$j(html).append('<div class="background"></div>'),/opera/.test(navigator.userAgent.toLowerCase())||$j(".background",html).css({height:$j(document).height()+"px"}),$j(html).append('<div class="popup"></div>'),$j(".popup",html).css({top:$j(window).scrollTop()+100+"px"});var path="/wcsstore/BoulangerStg/statics/plugins/loader/img/ajax-loader.gif";"undefined"!=typeof bl&&void 0!==bl.vars&&void 0!==bl.vars.imgDir&&(path="/wcsstore/BoulangerStg/statics/plugins/loader/img/ajax-loader.gif"),$j(".popup",html).append('<img src="'+path+'" width="100" height="100" alt="Chargement..." />'),$j(".popup",html).append("<p>Nous traitons votre demande, merci de patienter.</p>"),$j("body").append(html),$j("#blLoadingLayer").css("z-index",Box.zdIndex+100),loadingLayerHandle=setTimeout(hideLoadingLayer,12e4)}function hideLoadingLayer(){0<$j("#blLoadingLayer").length&&$j("#blLoadingLayer").hide(),null!=loadingLayerHandle&&(clearTimeout(loadingLayerHandle),loadingLayerHandle=null)}function submitSearch(){var newurl,nbMaxHistorySuggest=$j("#hd_search_form").attr("nbmaxSearchSuggest"),maxAgeCookiesuggest=$j("#hd_search_form").attr("maxAgeCookiesuggest");$j.isBlank(unsecureBaseHref)?newurl=$j("link[rel='canonical']").attr("href").replace("https://","").replace("www.","").replace("m.",""):newurl=unsecureBaseHref.replace("https://","").replace("www.","").replace("m.","");var isMobile=$j(".searchBar").attr("is-mobile");isMobile=!$j.isBlank(isMobile)&&"true"==isMobile;var searchTerm=document.getElementById("product_keyword").value;bl.cookie.suggestHistory(searchTerm,isMobile,nbMaxHistorySuggest,maxAgeCookiesuggest,newurl),$j.removeCookie("BL_SEARCHINPUTMODE",{path:"/"});var searchTermSuggest=$j("#product_keyword").attr("searchValue");void 0===searchTermSuggest&&(searchTermSuggest=searchTerm),""==searchTermSuggest||"Rechercher un produit, une marque, un magasin..."==searchTermSuggest||"Rechercher un produit"==searchTermSuggest||(document.location.href=getSearchUrl(searchTermSuggest))}function submitSpellCheckSearch(suggestion){$j("#product_keyword").val(suggestion),submitSearch()}function getSearchUrl(key){var categoryId=$j(".menu_search-select span").attr("value"),categoryIdURLComponent="";if(null!=categoryId&&void 0!==categoryId&&"#"!=categoryId&&""!=categoryId&&(categoryIdURLComponent="&u="+trim(categoryId)),""!=trim(key)){var keyForUrl=replaceAll(key,"\\+","_plus_");return keyForUrl=replaceSpecialCharacter(keyForUrl),unsecureBaseHref+"/resultats?tr="+keyForUrl+categoryIdURLComponent}}function replaceSpecialCharacter(val){var key=val,charArr=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=trim(key)).toLowerCase()).replace(/\s+/g,"+")).replace(/\//g,"+")).replace(/\"/g,"+")).replace(/'/g,"+")).replace(/;/g,"+")).replace(/!/g,"+")).replace(/{/g,"+")).replace(/}/g,"+")).replace(/&/g,"+")).replace(/[+]{2,}/g,"+")).replace(/%/g,"+")).split("");for(i=0;i<charArr.length;i++)-1<"%?$".indexOf(charArr[i])&&(charArr[i]=escape(charArr[i]));var temp=charArr.join("");return temp=temp.replace(/_plus_/g,"%2b")}function replaceAll(s,search,replaceBy){var Re=new RegExp(search,"g");return s.replace(Re,replaceBy)}function toDecode(urlToDecode){document.location.href=window.atob(urlToDecode)}function decodeURL(urlToDecode){return window.atob(urlToDecode)}function goTo(url){-1!=url.indexOf("toDecode")?eval(url):(url=url.replace(/'/g,""),document.location.href=url)}$j(document).ready(function(){$j(".baroWeb").on("click",function(){var modalUrl=$j(this).attr("data-modal-url");Box.open({modal:!0,url:modalUrl})})}),$j(document).ready(function(){$j(".baroWebFooter").on("click",function(){var protocol="https://";-1<window.location.host.indexOf("secure-mobile")&&(protocol="https://");var url=urlHappyScoreMobile;url+="&urlRemerciementForm="+protocol+window.location.host+"/webapp/wcs/stores/servlet/catalog/barowebRemerciementsMobile?urlRetour="+document.location.href,document.location.href=url})}),$j(document).ready(function(){$j(".baroWebHeader").on("click",function(){var protocol="https://";-1<window.location.host.indexOf("secure-mobile")&&(protocol="https://");var url=urlHappyScoreMobile;url+="&urlRemerciementForm="+protocol+window.location.host+"/webapp/wcs/stores/servlet/catalog/barowebRemerciementsMobile?urlRetour="+document.location.href,document.location.href=url})});var bindNumericsOnly=function(){$j(".numbersOnly").keypress(function(e){if(8!=e.which&&0!=e.which&&(e.which<48||57<e.which))return!1})},getXtn2=function(isCheckout,isMobile){var xtn2="17";return isMobile&&(xtn2=isCheckout?"6":"11"),xtn2}}catch(e){};